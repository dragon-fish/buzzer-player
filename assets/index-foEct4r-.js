var sa=Object.defineProperty;var aa=(t,e,n)=>e in t?sa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oa=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ue=(t,e,n)=>aa(t,typeof e!="symbol"?e+"":e,n);var Sp=oa((V,Y)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const un=Object.keys;function ca(t){return typeof t=="boolean"}function la(t){return t&&typeof t.nodeType=="number"}function rr(t){return typeof t=="string"}function Gi(t){return typeof t=="number"}function He(t){return typeof t=="object"?t!==null:Ot(t)}function Ot(t){return typeof t=="function"}function ua(t){return!!(t&&t.isComponent)}function ha(t){return He(t)&&typeof t.length=="number"&&typeof t.nodeType!="number"}function Bn(t,e){if(t)for(const n of un(t))e(t[n],n)}function fa(t){return He(t)&&"current"in t}const Gn={animationIterationCount:0,borderImageOutset:0,borderImageSlice:0,borderImageWidth:0,boxFlex:0,boxFlexGroup:0,boxOrdinalGroup:0,columnCount:0,columns:0,flex:0,flexGrow:0,flexPositive:0,flexShrink:0,flexNegative:0,flexOrder:0,gridArea:0,gridRow:0,gridRowEnd:0,gridRowSpan:0,gridRowStart:0,gridColumn:0,gridColumnEnd:0,gridColumnSpan:0,gridColumnStart:0,fontWeight:0,lineClamp:0,lineHeight:0,opacity:0,order:0,orphans:0,tabSize:0,widows:0,zIndex:0,zoom:0,fillOpacity:0,floodOpacity:0,stopOpacity:0,strokeDasharray:0,strokeDashoffset:0,strokeMiterlimit:0,strokeOpacity:0,strokeWidth:0};function da(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}const pa=["Webkit","ms","Moz","O"];un(Gn).forEach(t=>{pa.forEach(e=>{Gn[da(e,t)]=0})});const ma=Symbol.for("jsx-dom:type");var Ki=function(t){return t.ShadowRoot="ShadowRoot",t}(Ki||{});function ga(t){return t!=null&&t[ma]===Ki.ShadowRoot}const Ta="http://www.w3.org/2000/svg",Ea="http://www.w3.org/1999/xlink",Aa="http://www.w3.org/XML/1998/namespace";function Wi(t){return!ca(t)&&t!=null}function Kn(t){return Array.isArray(t)?t.map(Kn).filter(Boolean).join(" "):He(t)?Symbol.iterator in t?Kn(Array.from(t)):un(t).filter(e=>t[e]).join(" "):Wi(t)?""+t:""}const Ia={animate:0,circle:0,clipPath:0,defs:0,desc:0,ellipse:0,feBlend:0,feColorMatrix:0,feComponentTransfer:0,feComposite:0,feConvolveMatrix:0,feDiffuseLighting:0,feDisplacementMap:0,feDistantLight:0,feFlood:0,feFuncA:0,feFuncB:0,feFuncG:0,feFuncR:0,feGaussianBlur:0,feImage:0,feMerge:0,feMergeNode:0,feMorphology:0,feOffset:0,fePointLight:0,feSpecularLighting:0,feSpotLight:0,feTile:0,feTurbulence:0,filter:0,foreignObject:0,g:0,image:0,line:0,linearGradient:0,marker:0,mask:0,metadata:0,path:0,pattern:0,polygon:0,polyline:0,radialGradient:0,rect:0,stop:0,svg:0,switch:0,symbol:0,text:0,textPath:0,tspan:0,use:0,view:0},Ra=/^(a(ll|t|u)|base[FP]|c(al|lipPathU|on)|di|ed|ex|filter[RU]|g(lyphR|r)|ke|l(en|im)|ma(rker[HUW]|s)|n|pat|pr|point[^e]|re[^n]|s[puy]|st[^or]|ta|textL|vi|xC|y|z)/;function Sa(t,e,n){e={...e,children:n};const r=new t(e),i=r.render();return"ref"in e&&ir(e.ref,r),i}function z(t,e){let{children:n,...r}=e;!r.namespaceURI&&Ia[t]===0&&(r={...r,namespaceURI:Ta});let i;if(rr(t)){if(i=r.namespaceURI?document.createElementNS(r.namespaceURI,t):document.createElement(t),_a(r,i),sr(n,i),i instanceof window.HTMLSelectElement&&r.value!=null)if(r.multiple===!0&&Array.isArray(r.value)){const s=r.value.map(a=>String(a));i.querySelectorAll("option").forEach(a=>a.selected=s.includes(a.value))}else i.value=r.value;ir(r.ref,i)}else if(Ot(t))He(t.defaultProps)&&(r={...t.defaultProps,...r}),i=ua(t)?Sa(t,r,n):t({...r,children:n});else throw new TypeError(`Invalid JSX element type: ${t}`);return i}function ir(t,e){fa(t)?t.current=e:Ot(t)&&t(e)}function sr(t,e){if(ha(t))Oa(t,e);else if(rr(t)||Gi(t))vn(document.createTextNode(t),e);else if(t===null)vn(document.createComment(""),e);else if(la(t))vn(t,e);else if(ga(t)){const n=e.attachShadow(t.attr);sr(t.children,n),ir(t.ref,n)}}function Oa(t,e){for(const n of[...t])sr(n,e);return e}function vn(t,e){e instanceof window.HTMLTemplateElement?e.content.appendChild(t):e.appendChild(t)}function Dt(t,e){return t.replace(/[A-Z]/g,n=>e+n.toLowerCase())}function ji(t,e){e==null||e===!1||(Array.isArray(e)?e.forEach(n=>ji(t,n)):rr(e)?t.setAttribute("style",e):He(e)&&Bn(e,(n,r)=>{r.indexOf("-")===0?t.style.setProperty(r,n):Gi(n)&&Gn[r]!==0?t.style[r]=n+"px":t.style[r]=n}))}function Na(t,e,n){switch(t){case"xlinkActuate":case"xlinkArcrole":case"xlinkHref":case"xlinkRole":case"xlinkShow":case"xlinkTitle":case"xlinkType":$r(n,Ea,Dt(t,":"),e);return;case"xmlnsXlink":Je(n,Dt(t,":"),e);return;case"xmlBase":case"xmlLang":case"xmlSpace":$r(n,Aa,Dt(t,":"),e);return}switch(t){case"htmlFor":Je(n,"for",e);return;case"dataset":Bn(e,(r,i)=>{r!=null&&(n.dataset[i]=r)});return;case"innerHTML":case"innerText":case"textContent":Wi(e)&&(n[t]=e);return;case"dangerouslySetInnerHTML":He(e)&&(n.innerHTML=e.__html);return;case"value":if(e==null||n instanceof window.HTMLSelectElement)return;if(n instanceof window.HTMLTextAreaElement){n.value=e;return}break;case"spellCheck":n.spellcheck=e;return;case"class":case"className":Ot(e)?e(n):Je(n,"class",Kn(e));return;case"ref":case"namespaceURI":return;case"style":ji(n,e);return;case"on":case"onCapture":Bn(e,(r,i)=>{n.addEventListener(i,r,t==="onCapture")});return}if(Ot(e)){if(t[0]==="o"&&t[1]==="n"){let r=t.toLowerCase();const i=r.endsWith("capture");if(r==="ondoubleclick"?r="ondblclick":i&&r==="ondoubleclickcapture"&&(r="ondblclickcapture"),!i&&n[r]===null)n[r]=e;else if(i)n.addEventListener(r.substring(2,r.length-7),e,!0);else{let s;r in window?s=r.substring(2):s=r[2]+t.slice(3),n.addEventListener(s,e)}}}else He(e)?n[t]=e:e===!0?Je(n,t,""):e!==!1&&e!=null&&(n instanceof SVGElement&&!Ra.test(t)?Je(n,Dt(t,"-"),e):Je(n,t,e))}function Je(t,e,n){t.setAttribute(e,n)}function $r(t,e,n,r){t.setAttributeNS(e,n,r)}function _a(t,e){for(const n of un(t))Na(n,t[n],e);return e}var Hi=typeof global=="object"&&global&&global.Object===Object&&global,ya=typeof self=="object"&&self&&self.Object===Object&&self,Te=Hi||ya||Function("return this")(),te=Te.Symbol,zi=Object.prototype,Ca=zi.hasOwnProperty,xa=zi.toString,dt=te?te.toStringTag:void 0;function La(t){var e=Ca.call(t,dt),n=t[dt];try{t[dt]=void 0;var r=!0}catch{}var i=xa.call(t);return r&&(e?t[dt]=n:delete t[dt]),i}var va=Object.prototype,ka=va.toString;function Pa(t){return ka.call(t)}var ba="[object Null]",wa="[object Undefined]",Dr=te?te.toStringTag:void 0;function Be(t){return t==null?t===void 0?wa:ba:Dr&&Dr in Object(t)?La(t):Pa(t)}function le(t){return t!=null&&typeof t=="object"}var Ma="[object Symbol]";function hn(t){return typeof t=="symbol"||le(t)&&Be(t)==Ma}function fn(t,e){for(var n=-1,r=t==null?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var _=Array.isArray,Br=te?te.prototype:void 0,Gr=Br?Br.toString:void 0;function Vi(t){if(typeof t=="string")return t;if(_(t))return fn(t,Vi)+"";if(hn(t))return Gr?Gr.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var Fa=/\s/;function Ua(t){for(var e=t.length;e--&&Fa.test(t.charAt(e)););return e}var $a=/^\s+/;function Da(t){return t&&t.slice(0,Ua(t)+1).replace($a,"")}function ne(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Kr=NaN,Ba=/^[-+]0x[0-9a-f]+$/i,Ga=/^0b[01]+$/i,Ka=/^0o[0-7]+$/i,Wa=parseInt;function ja(t){if(typeof t=="number")return t;if(hn(t))return Kr;if(ne(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ne(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Da(t);var n=Ga.test(t);return n||Ka.test(t)?Wa(t.slice(2),n?2:8):Ba.test(t)?Kr:+t}var Ha=1/0,za=17976931348623157e292;function Va(t){if(!t)return t===0?t:0;if(t=ja(t),t===Ha||t===-1/0){var e=t<0?-1:1;return e*za}return t===t?t:0}function dn(t){var e=Va(t),n=e%1;return e===e?n?e-n:e:0}function rt(t){return t}var Ya="[object AsyncFunction]",Xa="[object Function]",qa="[object GeneratorFunction]",Za="[object Proxy]";function ve(t){if(!ne(t))return!1;var e=Be(t);return e==Xa||e==qa||e==Ya||e==Za}var kn=Te["__core-js_shared__"],Wr=function(){var t=/[^.]+$/.exec(kn&&kn.keys&&kn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Qa(t){return!!Wr&&Wr in t}var Ja=Function.prototype,eo=Ja.toString;function Xe(t){if(t!=null){try{return eo.call(t)}catch{}try{return t+""}catch{}}return""}var to=/[\\^$.*+?()[\]{}|]/g,no=/^\[object .+?Constructor\]$/,ro=Function.prototype,io=Object.prototype,so=ro.toString,ao=io.hasOwnProperty,oo=RegExp("^"+so.call(ao).replace(to,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function co(t){if(!ne(t)||Qa(t))return!1;var e=ve(t)?oo:no;return e.test(Xe(t))}function lo(t,e){return t==null?void 0:t[e]}function qe(t,e){var n=lo(t,e);return co(n)?n:void 0}var Wn=qe(Te,"WeakMap"),jr=Object.create,uo=function(){function t(){}return function(e){if(!ne(e))return{};if(jr)return jr(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();function ho(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function b(){}function fo(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}var po=800,mo=16,go=Date.now;function To(t){var e=0,n=0;return function(){var r=go(),i=mo-(r-n);if(n=r,i>0){if(++e>=po)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Eo(t){return function(){return t}}var Qt=function(){try{var t=qe(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ao=Qt?function(t,e){return Qt(t,"toString",{configurable:!0,enumerable:!1,value:Eo(e),writable:!0})}:rt,Io=To(Ao);function Yi(t,e){for(var n=-1,r=t==null?0:t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function Xi(t,e,n,r){for(var i=t.length,s=n+-1;++s<i;)if(e(t[s],s,t))return s;return-1}function Ro(t){return t!==t}function So(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function ar(t,e,n){return e===e?So(t,e,n):Xi(t,Ro,n)}function qi(t,e){var n=t==null?0:t.length;return!!n&&ar(t,e,0)>-1}var Oo=9007199254740991,No=/^(?:0|[1-9]\d*)$/;function pn(t,e){var n=typeof t;return e=e??Oo,!!e&&(n=="number"||n!="symbol"&&No.test(t))&&t>-1&&t%1==0&&t<e}function or(t,e,n){e=="__proto__"&&Qt?Qt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Lt(t,e){return t===e||t!==t&&e!==e}var _o=Object.prototype,yo=_o.hasOwnProperty;function mn(t,e,n){var r=t[e];(!(yo.call(t,e)&&Lt(r,n))||n===void 0&&!(e in t))&&or(t,e,n)}function cr(t,e,n,r){var i=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var o=e[s],c=void 0;c===void 0&&(c=t[o]),i?or(n,o,c):mn(n,o,c)}return n}var Hr=Math.max;function Co(t,e,n){return e=Hr(e===void 0?t.length-1:e,0),function(){for(var r=arguments,i=-1,s=Hr(r.length-e,0),a=Array(s);++i<s;)a[i]=r[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=r[i];return o[e]=n(a),ho(t,this,o)}}function lr(t,e){return Io(Co(t,e,rt),t+"")}var xo=9007199254740991;function ur(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=xo}function Ee(t){return t!=null&&ur(t.length)&&!ve(t)}function Zi(t,e,n){if(!ne(n))return!1;var r=typeof e;return(r=="number"?Ee(n)&&pn(e,n.length):r=="string"&&e in n)?Lt(n[e],t):!1}function Lo(t){return lr(function(e,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=t.length>3&&typeof s=="function"?(i--,s):void 0,a&&Zi(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++r<i;){var o=n[r];o&&t(e,o,r,s)}return e})}var vo=Object.prototype;function vt(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||vo;return t===n}function ko(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var Po="[object Arguments]";function zr(t){return le(t)&&Be(t)==Po}var Qi=Object.prototype,bo=Qi.hasOwnProperty,wo=Qi.propertyIsEnumerable,gn=zr(function(){return arguments}())?zr:function(t){return le(t)&&bo.call(t,"callee")&&!wo.call(t,"callee")};function Mo(){return!1}var Ji=typeof V=="object"&&V&&!V.nodeType&&V,Vr=Ji&&typeof Y=="object"&&Y&&!Y.nodeType&&Y,Fo=Vr&&Vr.exports===Ji,Yr=Fo?Te.Buffer:void 0,Uo=Yr?Yr.isBuffer:void 0,Nt=Uo||Mo,$o="[object Arguments]",Do="[object Array]",Bo="[object Boolean]",Go="[object Date]",Ko="[object Error]",Wo="[object Function]",jo="[object Map]",Ho="[object Number]",zo="[object Object]",Vo="[object RegExp]",Yo="[object Set]",Xo="[object String]",qo="[object WeakMap]",Zo="[object ArrayBuffer]",Qo="[object DataView]",Jo="[object Float32Array]",ec="[object Float64Array]",tc="[object Int8Array]",nc="[object Int16Array]",rc="[object Int32Array]",ic="[object Uint8Array]",sc="[object Uint8ClampedArray]",ac="[object Uint16Array]",oc="[object Uint32Array]",L={};L[Jo]=L[ec]=L[tc]=L[nc]=L[rc]=L[ic]=L[sc]=L[ac]=L[oc]=!0;L[$o]=L[Do]=L[Zo]=L[Bo]=L[Qo]=L[Go]=L[Ko]=L[Wo]=L[jo]=L[Ho]=L[zo]=L[Vo]=L[Yo]=L[Xo]=L[qo]=!1;function cc(t){return le(t)&&ur(t.length)&&!!L[Be(t)]}function Tn(t){return function(e){return t(e)}}var es=typeof V=="object"&&V&&!V.nodeType&&V,At=es&&typeof Y=="object"&&Y&&!Y.nodeType&&Y,lc=At&&At.exports===es,Pn=lc&&Hi.process,$e=function(){try{var t=At&&At.require&&At.require("util").types;return t||Pn&&Pn.binding&&Pn.binding("util")}catch{}}(),Xr=$e&&$e.isTypedArray,hr=Xr?Tn(Xr):cc,uc=Object.prototype,hc=uc.hasOwnProperty;function ts(t,e){var n=_(t),r=!n&&gn(t),i=!n&&!r&&Nt(t),s=!n&&!r&&!i&&hr(t),a=n||r||i||s,o=a?ko(t.length,String):[],c=o.length;for(var l in t)(e||hc.call(t,l))&&!(a&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||pn(l,c)))&&o.push(l);return o}function ns(t,e){return function(n){return t(e(n))}}var fc=ns(Object.keys,Object),dc=Object.prototype,pc=dc.hasOwnProperty;function rs(t){if(!vt(t))return fc(t);var e=[];for(var n in Object(t))pc.call(t,n)&&n!="constructor"&&e.push(n);return e}function re(t){return Ee(t)?ts(t):rs(t)}var mc=Object.prototype,gc=mc.hasOwnProperty,X=Lo(function(t,e){if(vt(e)||Ee(e)){cr(e,re(e),t);return}for(var n in e)gc.call(e,n)&&mn(t,n,e[n])});function Tc(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var Ec=Object.prototype,Ac=Ec.hasOwnProperty;function Ic(t){if(!ne(t))return Tc(t);var e=vt(t),n=[];for(var r in t)r=="constructor"&&(e||!Ac.call(t,r))||n.push(r);return n}function is(t){return Ee(t)?ts(t,!0):Ic(t)}var Rc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sc=/^\w*$/;function fr(t,e){if(_(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||hn(t)?!0:Sc.test(t)||!Rc.test(t)||e!=null&&t in Object(e)}var _t=qe(Object,"create");function Oc(){this.__data__=_t?_t(null):{},this.size=0}function Nc(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var _c="__lodash_hash_undefined__",yc=Object.prototype,Cc=yc.hasOwnProperty;function xc(t){var e=this.__data__;if(_t){var n=e[t];return n===_c?void 0:n}return Cc.call(e,t)?e[t]:void 0}var Lc=Object.prototype,vc=Lc.hasOwnProperty;function kc(t){var e=this.__data__;return _t?e[t]!==void 0:vc.call(e,t)}var Pc="__lodash_hash_undefined__";function bc(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=_t&&e===void 0?Pc:e,this}function ze(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ze.prototype.clear=Oc;ze.prototype.delete=Nc;ze.prototype.get=xc;ze.prototype.has=kc;ze.prototype.set=bc;function wc(){this.__data__=[],this.size=0}function En(t,e){for(var n=t.length;n--;)if(Lt(t[n][0],e))return n;return-1}var Mc=Array.prototype,Fc=Mc.splice;function Uc(t){var e=this.__data__,n=En(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():Fc.call(e,n,1),--this.size,!0}function $c(t){var e=this.__data__,n=En(e,t);return n<0?void 0:e[n][1]}function Dc(t){return En(this.__data__,t)>-1}function Bc(t,e){var n=this.__data__,r=En(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function ke(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ke.prototype.clear=wc;ke.prototype.delete=Uc;ke.prototype.get=$c;ke.prototype.has=Dc;ke.prototype.set=Bc;var yt=qe(Te,"Map");function Gc(){this.size=0,this.__data__={hash:new ze,map:new(yt||ke),string:new ze}}function Kc(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function An(t,e){var n=t.__data__;return Kc(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Wc(t){var e=An(this,t).delete(t);return this.size-=e?1:0,e}function jc(t){return An(this,t).get(t)}function Hc(t){return An(this,t).has(t)}function zc(t,e){var n=An(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function Pe(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Pe.prototype.clear=Gc;Pe.prototype.delete=Wc;Pe.prototype.get=jc;Pe.prototype.has=Hc;Pe.prototype.set=zc;var Vc="Expected a function";function dr(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Vc);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var a=t.apply(this,r);return n.cache=s.set(i,a)||s,a};return n.cache=new(dr.Cache||Pe),n}dr.Cache=Pe;var Yc=500;function Xc(t){var e=dr(t,function(r){return n.size===Yc&&n.clear(),r}),n=e.cache;return e}var qc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zc=/\\(\\)?/g,Qc=Xc(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(qc,function(n,r,i,s){e.push(i?s.replace(Zc,"$1"):r||n)}),e});function Jc(t){return t==null?"":Vi(t)}function In(t,e){return _(t)?t:fr(t,e)?[t]:Qc(Jc(t))}function kt(t){if(typeof t=="string"||hn(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function pr(t,e){e=In(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[kt(e[n++])];return n&&n==r?t:void 0}function el(t,e,n){var r=t==null?void 0:pr(t,e);return r===void 0?n:r}function mr(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var qr=te?te.isConcatSpreadable:void 0;function tl(t){return _(t)||gn(t)||!!(qr&&t&&t[qr])}function gr(t,e,n,r,i){var s=-1,a=t.length;for(n||(n=tl),i||(i=[]);++s<a;){var o=t[s];n(o)?mr(i,o):r||(i[i.length]=o)}return i}function oe(t){var e=t==null?0:t.length;return e?gr(t):[]}var ss=ns(Object.getPrototypeOf,Object);function as(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(i);++r<i;)s[r]=t[r+e];return s}function nl(t,e,n,r){var i=-1,s=t==null?0:t.length;for(r&&s&&(n=t[++i]);++i<s;)n=e(n,t[i],i,t);return n}function rl(){this.__data__=new ke,this.size=0}function il(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function sl(t){return this.__data__.get(t)}function al(t){return this.__data__.has(t)}var ol=200;function cl(t,e){var n=this.__data__;if(n instanceof ke){var r=n.__data__;if(!yt||r.length<ol-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Pe(r)}return n.set(t,e),this.size=n.size,this}function ge(t){var e=this.__data__=new ke(t);this.size=e.size}ge.prototype.clear=rl;ge.prototype.delete=il;ge.prototype.get=sl;ge.prototype.has=al;ge.prototype.set=cl;function ll(t,e){return t&&cr(e,re(e),t)}var os=typeof V=="object"&&V&&!V.nodeType&&V,Zr=os&&typeof Y=="object"&&Y&&!Y.nodeType&&Y,ul=Zr&&Zr.exports===os,Qr=ul?Te.Buffer:void 0,Jr=Qr?Qr.allocUnsafe:void 0;function hl(t,e){var n=t.length,r=Jr?Jr(n):new t.constructor(n);return t.copy(r),r}function Tr(t,e){for(var n=-1,r=t==null?0:t.length,i=0,s=[];++n<r;){var a=t[n];e(a,n,t)&&(s[i++]=a)}return s}function cs(){return[]}var fl=Object.prototype,dl=fl.propertyIsEnumerable,ei=Object.getOwnPropertySymbols,Er=ei?function(t){return t==null?[]:(t=Object(t),Tr(ei(t),function(e){return dl.call(t,e)}))}:cs;function pl(t,e){return cr(t,Er(t),e)}var ml=Object.getOwnPropertySymbols,gl=ml?function(t){for(var e=[];t;)mr(e,Er(t)),t=ss(t);return e}:cs;function ls(t,e,n){var r=e(t);return _(t)?r:mr(r,n(t))}function jn(t){return ls(t,re,Er)}function Tl(t){return ls(t,is,gl)}var Hn=qe(Te,"DataView"),zn=qe(Te,"Promise"),tt=qe(Te,"Set"),ti="[object Map]",El="[object Object]",ni="[object Promise]",ri="[object Set]",ii="[object WeakMap]",si="[object DataView]",Al=Xe(Hn),Il=Xe(yt),Rl=Xe(zn),Sl=Xe(tt),Ol=Xe(Wn),J=Be;(Hn&&J(new Hn(new ArrayBuffer(1)))!=si||yt&&J(new yt)!=ti||zn&&J(zn.resolve())!=ni||tt&&J(new tt)!=ri||Wn&&J(new Wn)!=ii)&&(J=function(t){var e=Be(t),n=e==El?t.constructor:void 0,r=n?Xe(n):"";if(r)switch(r){case Al:return si;case Il:return ti;case Rl:return ni;case Sl:return ri;case Ol:return ii}return e});var Nl=Object.prototype,_l=Nl.hasOwnProperty;function yl(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&_l.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var Jt=Te.Uint8Array;function Cl(t){var e=new t.constructor(t.byteLength);return new Jt(e).set(new Jt(t)),e}function xl(t,e){var n=t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var Ll=/\w*$/;function vl(t){var e=new t.constructor(t.source,Ll.exec(t));return e.lastIndex=t.lastIndex,e}var ai=te?te.prototype:void 0,oi=ai?ai.valueOf:void 0;function kl(t){return oi?Object(oi.call(t)):{}}function Pl(t,e){var n=t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var bl="[object Boolean]",wl="[object Date]",Ml="[object Map]",Fl="[object Number]",Ul="[object RegExp]",$l="[object Set]",Dl="[object String]",Bl="[object Symbol]",Gl="[object ArrayBuffer]",Kl="[object DataView]",Wl="[object Float32Array]",jl="[object Float64Array]",Hl="[object Int8Array]",zl="[object Int16Array]",Vl="[object Int32Array]",Yl="[object Uint8Array]",Xl="[object Uint8ClampedArray]",ql="[object Uint16Array]",Zl="[object Uint32Array]";function Ql(t,e,n){var r=t.constructor;switch(e){case Gl:return Cl(t);case bl:case wl:return new r(+t);case Kl:return xl(t);case Wl:case jl:case Hl:case zl:case Vl:case Yl:case Xl:case ql:case Zl:return Pl(t);case Ml:return new r;case Fl:case Dl:return new r(t);case Ul:return vl(t);case $l:return new r;case Bl:return kl(t)}}function Jl(t){return typeof t.constructor=="function"&&!vt(t)?uo(ss(t)):{}}var eu="[object Map]";function tu(t){return le(t)&&J(t)==eu}var ci=$e&&$e.isMap,nu=ci?Tn(ci):tu,ru="[object Set]";function iu(t){return le(t)&&J(t)==ru}var li=$e&&$e.isSet,su=li?Tn(li):iu,us="[object Arguments]",au="[object Array]",ou="[object Boolean]",cu="[object Date]",lu="[object Error]",hs="[object Function]",uu="[object GeneratorFunction]",hu="[object Map]",fu="[object Number]",fs="[object Object]",du="[object RegExp]",pu="[object Set]",mu="[object String]",gu="[object Symbol]",Tu="[object WeakMap]",Eu="[object ArrayBuffer]",Au="[object DataView]",Iu="[object Float32Array]",Ru="[object Float64Array]",Su="[object Int8Array]",Ou="[object Int16Array]",Nu="[object Int32Array]",_u="[object Uint8Array]",yu="[object Uint8ClampedArray]",Cu="[object Uint16Array]",xu="[object Uint32Array]",C={};C[us]=C[au]=C[Eu]=C[Au]=C[ou]=C[cu]=C[Iu]=C[Ru]=C[Su]=C[Ou]=C[Nu]=C[hu]=C[fu]=C[fs]=C[du]=C[pu]=C[mu]=C[gu]=C[_u]=C[yu]=C[Cu]=C[xu]=!0;C[lu]=C[hs]=C[Tu]=!1;function Ht(t,e,n,r,i,s){var a;if(a!==void 0)return a;if(!ne(t))return t;var o=_(t);if(o)return a=yl(t),fo(t,a);var c=J(t),l=c==hs||c==uu;if(Nt(t))return hl(t);if(c==fs||c==us||l&&!i)return a=l?{}:Jl(t),pl(t,ll(a,t));if(!C[c])return i?t:{};a=Ql(t,c),s||(s=new ge);var u=s.get(t);if(u)return u;s.set(t,a),su(t)?t.forEach(function(d){a.add(Ht(d,e,n,d,t,s))}):nu(t)&&t.forEach(function(d,g){a.set(g,Ht(d,e,n,g,t,s))});var h=jn,f=o?void 0:h(t);return Yi(f||t,function(d,g){f&&(g=d,d=t[g]),mn(a,g,Ht(d,e,n,g,t,s))}),a}var Lu=4;function U(t){return Ht(t,Lu)}function Pt(t){for(var e=-1,n=t==null?0:t.length,r=0,i=[];++e<n;){var s=t[e];s&&(i[r++]=s)}return i}var vu="__lodash_hash_undefined__";function ku(t){return this.__data__.set(t,vu),this}function Pu(t){return this.__data__.has(t)}function it(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Pe;++e<n;)this.add(t[e])}it.prototype.add=it.prototype.push=ku;it.prototype.has=Pu;function ds(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Ar(t,e){return t.has(e)}var bu=1,wu=2;function ps(t,e,n,r,i,s){var a=n&bu,o=t.length,c=e.length;if(o!=c&&!(a&&c>o))return!1;var l=s.get(t),u=s.get(e);if(l&&u)return l==e&&u==t;var h=-1,f=!0,d=n&wu?new it:void 0;for(s.set(t,e),s.set(e,t);++h<o;){var g=t[h],I=e[h];if(r)var R=a?r(I,g,h,e,t,s):r(g,I,h,t,e,s);if(R!==void 0){if(R)continue;f=!1;break}if(d){if(!ds(e,function(T,m){if(!Ar(d,m)&&(g===T||i(g,T,n,r,s)))return d.push(m)})){f=!1;break}}else if(!(g===I||i(g,I,n,r,s))){f=!1;break}}return s.delete(t),s.delete(e),f}function Mu(t){var e=-1,n=Array(t.size);return t.forEach(function(r,i){n[++e]=[i,r]}),n}function Ir(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Fu=1,Uu=2,$u="[object Boolean]",Du="[object Date]",Bu="[object Error]",Gu="[object Map]",Ku="[object Number]",Wu="[object RegExp]",ju="[object Set]",Hu="[object String]",zu="[object Symbol]",Vu="[object ArrayBuffer]",Yu="[object DataView]",ui=te?te.prototype:void 0,bn=ui?ui.valueOf:void 0;function Xu(t,e,n,r,i,s,a){switch(n){case Yu:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Vu:return!(t.byteLength!=e.byteLength||!s(new Jt(t),new Jt(e)));case $u:case Du:case Ku:return Lt(+t,+e);case Bu:return t.name==e.name&&t.message==e.message;case Wu:case Hu:return t==e+"";case Gu:var o=Mu;case ju:var c=r&Fu;if(o||(o=Ir),t.size!=e.size&&!c)return!1;var l=a.get(t);if(l)return l==e;r|=Uu,a.set(t,e);var u=ps(o(t),o(e),r,i,s,a);return a.delete(t),u;case zu:if(bn)return bn.call(t)==bn.call(e)}return!1}var qu=1,Zu=Object.prototype,Qu=Zu.hasOwnProperty;function Ju(t,e,n,r,i,s){var a=n&qu,o=jn(t),c=o.length,l=jn(e),u=l.length;if(c!=u&&!a)return!1;for(var h=c;h--;){var f=o[h];if(!(a?f in e:Qu.call(e,f)))return!1}var d=s.get(t),g=s.get(e);if(d&&g)return d==e&&g==t;var I=!0;s.set(t,e),s.set(e,t);for(var R=a;++h<c;){f=o[h];var T=t[f],m=e[f];if(r)var p=a?r(m,T,f,e,t,s):r(T,m,f,t,e,s);if(!(p===void 0?T===m||i(T,m,n,r,s):p)){I=!1;break}R||(R=f=="constructor")}if(I&&!R){var E=t.constructor,y=e.constructor;E!=y&&"constructor"in t&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof y=="function"&&y instanceof y)&&(I=!1)}return s.delete(t),s.delete(e),I}var eh=1,hi="[object Arguments]",fi="[object Array]",Bt="[object Object]",th=Object.prototype,di=th.hasOwnProperty;function nh(t,e,n,r,i,s){var a=_(t),o=_(e),c=a?fi:J(t),l=o?fi:J(e);c=c==hi?Bt:c,l=l==hi?Bt:l;var u=c==Bt,h=l==Bt,f=c==l;if(f&&Nt(t)){if(!Nt(e))return!1;a=!0,u=!1}if(f&&!u)return s||(s=new ge),a||hr(t)?ps(t,e,n,r,i,s):Xu(t,e,c,n,r,i,s);if(!(n&eh)){var d=u&&di.call(t,"__wrapped__"),g=h&&di.call(e,"__wrapped__");if(d||g){var I=d?t.value():t,R=g?e.value():e;return s||(s=new ge),i(I,R,n,r,s)}}return f?(s||(s=new ge),Ju(t,e,n,r,i,s)):!1}function Rr(t,e,n,r,i){return t===e?!0:t==null||e==null||!le(t)&&!le(e)?t!==t&&e!==e:nh(t,e,n,r,Rr,i)}var rh=1,ih=2;function sh(t,e,n,r){var i=n.length,s=i;if(t==null)return!s;for(t=Object(t);i--;){var a=n[i];if(a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=n[i];var o=a[0],c=t[o],l=a[1];if(a[2]){if(c===void 0&&!(o in t))return!1}else{var u=new ge,h;if(!(h===void 0?Rr(l,c,rh|ih,r,u):h))return!1}}return!0}function ms(t){return t===t&&!ne(t)}function ah(t){for(var e=re(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ms(i)]}return e}function gs(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function oh(t){var e=ah(t);return e.length==1&&e[0][2]?gs(e[0][0],e[0][1]):function(n){return n===t||sh(n,t,e)}}function ch(t,e){return t!=null&&e in Object(t)}function Ts(t,e,n){e=In(e,t);for(var r=-1,i=e.length,s=!1;++r<i;){var a=kt(e[r]);if(!(s=t!=null&&n(t,a)))break;t=t[a]}return s||++r!=i?s:(i=t==null?0:t.length,!!i&&ur(i)&&pn(a,i)&&(_(t)||gn(t)))}function lh(t,e){return t!=null&&Ts(t,e,ch)}var uh=1,hh=2;function fh(t,e){return fr(t)&&ms(e)?gs(kt(t),e):function(n){var r=el(n,t);return r===void 0&&r===e?lh(n,t):Rr(e,r,uh|hh)}}function dh(t){return function(e){return e==null?void 0:e[t]}}function ph(t){return function(e){return pr(e,t)}}function mh(t){return fr(t)?dh(kt(t)):ph(t)}function Ae(t){return typeof t=="function"?t:t==null?rt:typeof t=="object"?_(t)?fh(t[0],t[1]):oh(t):mh(t)}function gh(t,e,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;){var a=t[i];e(r,a,n(a),t)}return r}function Th(t){return function(e,n,r){for(var i=-1,s=Object(e),a=r(e),o=a.length;o--;){var c=a[++i];if(n(s[c],c,s)===!1)break}return e}}var Eh=Th();function Ah(t,e){return t&&Eh(t,e,re)}function Ih(t,e){return function(n,r){if(n==null)return n;if(!Ee(n))return t(n,r);for(var i=n.length,s=-1,a=Object(n);++s<i&&r(a[s],s,a)!==!1;);return n}}var Ze=Ih(Ah);function Rh(t,e,n,r){return Ze(t,function(i,s,a){e(r,i,n(i),a)}),r}function Sh(t,e){return function(n,r){var i=_(n)?gh:Rh,s=e?e():{};return i(n,t,Ae(r),s)}}var Es=Object.prototype,Oh=Es.hasOwnProperty,Sr=lr(function(t,e){t=Object(t);var n=-1,r=e.length,i=r>2?e[2]:void 0;for(i&&Zi(e[0],e[1],i)&&(r=1);++n<r;)for(var s=e[n],a=is(s),o=-1,c=a.length;++o<c;){var l=a[o],u=t[l];(u===void 0||Lt(u,Es[l])&&!Oh.call(t,l))&&(t[l]=s[l])}return t});function pi(t){return le(t)&&Ee(t)}var Nh=200;function _h(t,e,n,r){var i=-1,s=qi,a=!0,o=t.length,c=[],l=e.length;if(!o)return c;e.length>=Nh&&(s=Ar,a=!1,e=new it(e));e:for(;++i<o;){var u=t[i],h=u;if(u=u!==0?u:0,a&&h===h){for(var f=l;f--;)if(e[f]===h)continue e;c.push(u)}else s(e,h,r)||c.push(u)}return c}var Rn=lr(function(t,e){return pi(t)?_h(t,gr(e,1,pi,!0)):[]});function st(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}function F(t,e,n){var r=t==null?0:t.length;return r?(e=e===void 0?1:dn(e),as(t,e<0?0:e,r)):[]}function Ct(t,e,n){var r=t==null?0:t.length;return r?(e=e===void 0?1:dn(e),e=r-e,as(t,0,e<0?0:e)):[]}function yh(t){return typeof t=="function"?t:rt}function O(t,e){var n=_(t)?Yi:Ze;return n(t,yh(e))}function Ch(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function xh(t,e){var n=!0;return Ze(t,function(r,i,s){return n=!!e(r,i,s),n}),n}function ce(t,e,n){var r=_(t)?Ch:xh;return r(t,Ae(e))}function As(t,e){var n=[];return Ze(t,function(r,i,s){e(r,i,s)&&n.push(r)}),n}function ie(t,e){var n=_(t)?Tr:As;return n(t,Ae(e))}function Lh(t){return function(e,n,r){var i=Object(e);if(!Ee(e)){var s=Ae(n);e=re(e),n=function(o){return s(i[o],o,i)}}var a=t(e,n,r);return a>-1?i[s?e[a]:a]:void 0}}var vh=Math.max;function kh(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=n==null?0:dn(n);return i<0&&(i=vh(r+i,0)),Xi(t,Ae(e),i)}var at=Lh(kh);function ue(t){return t&&t.length?t[0]:void 0}function Ph(t,e){var n=-1,r=Ee(t)?Array(t.length):[];return Ze(t,function(i,s,a){r[++n]=e(i,s,a)}),r}function A(t,e){var n=_(t)?fn:Ph;return n(t,Ae(e))}function ee(t,e){return gr(A(t,e))}var bh=Object.prototype,wh=bh.hasOwnProperty,Mh=Sh(function(t,e,n){wh.call(t,n)?t[n].push(e):or(t,n,[e])}),Fh=Object.prototype,Uh=Fh.hasOwnProperty;function $h(t,e){return t!=null&&Uh.call(t,e)}function S(t,e){return t!=null&&Ts(t,e,$h)}var Dh="[object String]";function W(t){return typeof t=="string"||!_(t)&&le(t)&&Be(t)==Dh}function Bh(t,e){return fn(e,function(n){return t[n]})}function w(t){return t==null?[]:Bh(t,re(t))}var Gh=Math.max;function G(t,e,n,r){t=Ee(t)?t:w(t),n=n?dn(n):0;var i=t.length;return n<0&&(n=Gh(i+n,0)),W(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&ar(t,e,n)>-1}function mi(t,e,n){var r=t==null?0:t.length;if(!r)return-1;var i=0;return ar(t,e,i)}var Kh="[object Map]",Wh="[object Set]",jh=Object.prototype,Hh=jh.hasOwnProperty;function x(t){if(t==null)return!0;if(Ee(t)&&(_(t)||typeof t=="string"||typeof t.splice=="function"||Nt(t)||hr(t)||gn(t)))return!t.length;var e=J(t);if(e==Kh||e==Wh)return!t.size;if(vt(t))return!rs(t).length;for(var n in t)if(Hh.call(t,n))return!1;return!0}var zh="[object RegExp]";function Vh(t){return le(t)&&Be(t)==zh}var gi=$e&&$e.isRegExp,Ce=gi?Tn(gi):Vh;function xe(t){return t===void 0}var Yh="Expected a function";function Xh(t){if(typeof t!="function")throw new TypeError(Yh);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function qh(t,e,n,r){if(!ne(t))return t;e=In(e,t);for(var i=-1,s=e.length,a=s-1,o=t;o!=null&&++i<s;){var c=kt(e[i]),l=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return t;if(i!=a){var u=o[c];l=void 0,l===void 0&&(l=ne(u)?u:pn(e[i+1])?[]:{})}mn(o,c,l),o=o[c]}return t}function Zh(t,e,n){for(var r=-1,i=e.length,s={};++r<i;){var a=e[r],o=pr(t,a);n(o,a)&&qh(s,In(a,t),o)}return s}function he(t,e){if(t==null)return{};var n=fn(Tl(t),function(r){return[r]});return e=Ae(e),Zh(t,n,function(r,i){return e(r,i[0])})}function Qh(t,e,n,r,i){return i(t,function(s,a,o){n=r?(r=!1,s):e(n,s,a,o)}),n}function q(t,e,n){var r=_(t)?nl:Qh,i=arguments.length<3;return r(t,Ae(e),n,i,Ze)}function Sn(t,e){var n=_(t)?Tr:As;return n(t,Xh(Ae(e)))}function Jh(t,e){var n;return Ze(t,function(r,i,s){return n=e(r,i,s),!n}),!!n}function Is(t,e,n){var r=_(t)?ds:Jh;return r(t,Ae(e))}var ef=1/0,tf=tt&&1/Ir(new tt([,-0]))[1]==ef?function(t){return new tt(t)}:b,nf=200;function rf(t,e,n){var r=-1,i=qi,s=t.length,a=!0,o=[],c=o;if(s>=nf){var l=tf(t);if(l)return Ir(l);a=!1,i=Ar,c=new it}else c=o;e:for(;++r<s;){var u=t[r],h=u;if(u=u!==0?u:0,a&&h===h){for(var f=c.length;f--;)if(c[f]===h)continue e;o.push(u)}else i(c,h,n)||(c!==o&&c.push(h),o.push(u))}return o}function Or(t){return t&&t.length?rf(t):[]}function Vn(t){console&&console.error&&console.error(`Error: ${t}`)}function Rs(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function Ss(t){const e=new Date().getTime(),n=t();return{time:new Date().getTime()-e,value:n}}function Os(t){function e(){}e.prototype=t;const n=new e;function r(){return typeof n.bar}return r(),r(),t}function sf(t){return af(t)?t.LABEL:t.name}function af(t){return W(t.LABEL)&&t.LABEL!==""}class Ie{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),O(this.definition,n=>{n.accept(e)})}}class Z extends Ie{constructor(e){super([]),this.idx=1,X(this,he(e,n=>n!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class ot extends Ie{constructor(e){super(e.definition),this.orgText="",X(this,he(e,n=>n!==void 0))}}class j extends Ie{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,X(this,he(e,n=>n!==void 0))}}class K extends Ie{constructor(e){super(e.definition),this.idx=1,X(this,he(e,n=>n!==void 0))}}class Re extends Ie{constructor(e){super(e.definition),this.idx=1,X(this,he(e,n=>n!==void 0))}}class Se extends Ie{constructor(e){super(e.definition),this.idx=1,X(this,he(e,n=>n!==void 0))}}class M extends Ie{constructor(e){super(e.definition),this.idx=1,X(this,he(e,n=>n!==void 0))}}class fe extends Ie{constructor(e){super(e.definition),this.idx=1,X(this,he(e,n=>n!==void 0))}}class de extends Ie{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,X(this,he(e,n=>n!==void 0))}}class v{constructor(e){this.idx=1,X(this,he(e,n=>n!==void 0))}accept(e){e.visit(this)}}function of(t){return A(t,zt)}function zt(t){function e(n){return A(n,zt)}if(t instanceof Z){const n={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return W(t.label)&&(n.label=t.label),n}else{if(t instanceof j)return{type:"Alternative",definition:e(t.definition)};if(t instanceof K)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof Re)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Se)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:zt(new v({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof fe)return{type:"RepetitionWithSeparator",idx:t.idx,separator:zt(new v({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof M)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof de)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof v){const n={type:"Terminal",name:t.terminalType.name,label:sf(t.terminalType),idx:t.idx};W(t.label)&&(n.terminalLabel=t.label);const r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=Ce(r)?r.source:r),n}else{if(t instanceof ot)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}class ct{visit(e){const n=e;switch(n.constructor){case Z:return this.visitNonTerminal(n);case j:return this.visitAlternative(n);case K:return this.visitOption(n);case Re:return this.visitRepetitionMandatory(n);case Se:return this.visitRepetitionMandatoryWithSeparator(n);case fe:return this.visitRepetitionWithSeparator(n);case M:return this.visitRepetition(n);case de:return this.visitAlternation(n);case v:return this.visitTerminal(n);case ot:return this.visitRule(n);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function cf(t){return t instanceof j||t instanceof K||t instanceof M||t instanceof Re||t instanceof Se||t instanceof fe||t instanceof v||t instanceof ot}function en(t,e=[]){return t instanceof K||t instanceof M||t instanceof fe?!0:t instanceof de?Is(t.definition,r=>en(r,e)):t instanceof Z&&G(e,t)?!1:t instanceof Ie?(t instanceof Z&&e.push(t),ce(t.definition,r=>en(r,e))):!1}function lf(t){return t instanceof de}function me(t){if(t instanceof Z)return"SUBRULE";if(t instanceof K)return"OPTION";if(t instanceof de)return"OR";if(t instanceof Re)return"AT_LEAST_ONE";if(t instanceof Se)return"AT_LEAST_ONE_SEP";if(t instanceof fe)return"MANY_SEP";if(t instanceof M)return"MANY";if(t instanceof v)return"CONSUME";throw Error("non exhaustive match")}class On{walk(e,n=[]){O(e.definition,(r,i)=>{const s=F(e.definition,i+1);if(r instanceof Z)this.walkProdRef(r,s,n);else if(r instanceof v)this.walkTerminal(r,s,n);else if(r instanceof j)this.walkFlat(r,s,n);else if(r instanceof K)this.walkOption(r,s,n);else if(r instanceof Re)this.walkAtLeastOne(r,s,n);else if(r instanceof Se)this.walkAtLeastOneSep(r,s,n);else if(r instanceof fe)this.walkManySep(r,s,n);else if(r instanceof M)this.walkMany(r,s,n);else if(r instanceof de)this.walkOr(r,s,n);else throw Error("non exhaustive match")})}walkTerminal(e,n,r){}walkProdRef(e,n,r){}walkFlat(e,n,r){const i=n.concat(r);this.walk(e,i)}walkOption(e,n,r){const i=n.concat(r);this.walk(e,i)}walkAtLeastOne(e,n,r){const i=[new K({definition:e.definition})].concat(n,r);this.walk(e,i)}walkAtLeastOneSep(e,n,r){const i=Ti(e,n,r);this.walk(e,i)}walkMany(e,n,r){const i=[new K({definition:e.definition})].concat(n,r);this.walk(e,i)}walkManySep(e,n,r){const i=Ti(e,n,r);this.walk(e,i)}walkOr(e,n,r){const i=n.concat(r);O(e.definition,s=>{const a=new j({definition:[s]});this.walk(a,i)})}}function Ti(t,e,n){return[new K({definition:[new v({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}function bt(t){if(t instanceof Z)return bt(t.referencedRule);if(t instanceof v)return ff(t);if(cf(t))return uf(t);if(lf(t))return hf(t);throw Error("non exhaustive match")}function uf(t){let e=[];const n=t.definition;let r=0,i=n.length>r,s,a=!0;for(;i&&a;)s=n[r],a=en(s),e=e.concat(bt(s)),r=r+1,i=n.length>r;return Or(e)}function hf(t){const e=A(t.definition,n=>bt(n));return Or(oe(e))}function ff(t){return[t.terminalType]}const Ns="_~IN~_";class df extends On{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,n,r){}walkProdRef(e,n,r){const i=mf(e.referencedRule,e.idx)+this.topProd.name,s=n.concat(r),a=new j({definition:s}),o=bt(a);this.follows[i]=o}}function pf(t){const e={};return O(t,n=>{const r=new df(n).startWalking();X(e,r)}),e}function mf(t,e){return t.name+e+Ns}function N(t){return t.charCodeAt(0)}function wn(t,e){Array.isArray(t)?t.forEach(function(n){e.push(n)}):e.push(t)}function pt(t,e){if(t[e]===!0)throw"duplicate flag "+e;t[e],t[e]=!0}function et(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function gf(){throw Error("Internal Error - Should never get here!")}function Ei(t){return t.type==="Character"}const tn=[];for(let t=N("0");t<=N("9");t++)tn.push(t);const nn=[N("_")].concat(tn);for(let t=N("a");t<=N("z");t++)nn.push(t);for(let t=N("A");t<=N("Z");t++)nn.push(t);const Ai=[N(" "),N("\f"),N(`
`),N("\r"),N("	"),N("\v"),N("	"),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N(" "),N("\u2028"),N("\u2029"),N(" "),N(" "),N("　"),N("\uFEFF")],Tf=/[0-9a-fA-F]/,Gt=/[0-9]/,Ef=/[1-9]/;class Af{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const n=this.disjunction();this.consumeChar("/");const r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":pt(r,"global");break;case"i":pt(r,"ignoreCase");break;case"m":pt(r,"multiLine");break;case"u":pt(r,"unicode");break;case"y":pt(r,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:n,loc:this.loc(0)}}disjunction(){const e=[],n=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(n)}}alternative(){const e=[],n=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(n)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let n;switch(this.popChar()){case"=":n="Lookahead";break;case"!":n="NegativeLookahead";break}et(n);const r=this.disjunction();return this.consumeChar(")"),{type:n,value:r,loc:this.loc(e)}}return gf()}quantifier(e=!1){let n;const r=this.idx;switch(this.popChar()){case"*":n={atLeast:0,atMost:1/0};break;case"+":n={atLeast:1,atMost:1/0};break;case"?":n={atLeast:0,atMost:1};break;case"{":const i=this.integerIncludingZero();switch(this.popChar()){case"}":n={atLeast:i,atMost:i};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),n={atLeast:i,atMost:s}):n={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&n===void 0)return;et(n);break}if(!(e===!0&&n===void 0)&&et(n))return this.peekChar(0)==="?"?(this.consumeChar("?"),n.greedy=!1):n.greedy=!0,n.type="Quantifier",n.loc=this.loc(r),n}atom(){let e;const n=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}if(e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),et(e))return e.loc=this.loc(n),this.isQuantifier()&&(e.quantifier=this.quantifier()),e}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[N(`
`),N("\r"),N("\u2028"),N("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,n=!1;switch(this.popChar()){case"d":e=tn;break;case"D":e=tn,n=!0;break;case"s":e=Ai;break;case"S":e=Ai,n=!0;break;case"w":e=nn;break;case"W":e=nn,n=!0;break}if(et(e))return{type:"Set",value:e,complement:n}}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=N("\f");break;case"n":e=N(`
`);break;case"r":e=N("\r");break;case"t":e=N("	");break;case"v":e=N("\v");break}if(et(e))return{type:"Character",value:e}}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:N("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:N(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:N(e)}}}characterClass(){const e=[];let n=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),n=!0);this.isClassAtom();){const r=this.classAtom();if(r.type,Ei(r)&&this.isRangeDash()){this.consumeChar("-");const i=this.classAtom();if(i.type,Ei(i)){if(i.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:i.value})}else wn(r.value,e),e.push(N("-")),wn(i.value,e)}else wn(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:n,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:N("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const n=this.disjunction();this.consumeChar(")");const r={type:"Group",capturing:e,value:n};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(Ef.test(e)===!1)throw Error("Expecting a positive integer");for(;Gt.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(Gt.test(e)===!1)throw Error("Expecting an integer");for(;Gt.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:N(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return Gt.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let n="";for(let i=0;i<e;i++){const s=this.popChar();if(Tf.test(s)===!1)throw Error("Expecting a HexDecimal digits");n+=s}return{type:"Character",value:parseInt(n,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class Nr{visitChildren(e){for(const n in e){const r=e[n];e.hasOwnProperty(n)&&(r.type!==void 0?this.visit(r):Array.isArray(r)&&r.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}let Vt={};const If=new Af;function Nn(t){const e=t.toString();if(Vt.hasOwnProperty(e))return Vt[e];{const n=If.pattern(e);return Vt[e]=n,n}}function Rf(){Vt={}}const _s="Complement Sets are not supported for first char optimization",rn=`Unable to use "first char" lexer optimizations:
`;function Sf(t,e=!1){try{const n=Nn(t);return Yn(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===_s)e&&Rs(`${rn}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";e&&(r=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Vn(`${rn}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function Yn(t,e,n){switch(t.type){case"Disjunction":for(let i=0;i<t.value.length;i++)Yn(t.value[i],e,n);break;case"Alternative":const r=t.value;for(let i=0;i<r.length;i++){const s=r[i];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const a=s;switch(a.type){case"Character":Kt(a.value,e,n);break;case"Set":if(a.complement===!0)throw Error(_s);O(a.value,c=>{if(typeof c=="number")Kt(c,e,n);else{const l=c;if(n===!0)for(let u=l.from;u<=l.to;u++)Kt(u,e,n);else{for(let u=l.from;u<=l.to&&u<Tt;u++)Kt(u,e,n);if(l.to>=Tt){const u=l.from>=Tt?l.from:Tt,h=l.to,f=De(u),d=De(h);for(let g=f;g<=d;g++)e[g]=g}}}});break;case"Group":Yn(a.value,e,n);break;default:throw Error("Non Exhaustive Match")}const o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&Xn(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return w(e)}function Kt(t,e,n){const r=De(t);e[r]=r,n===!0&&Of(t,e)}function Of(t,e){const n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n){const i=De(r.charCodeAt(0));e[i]=i}else{const i=n.toLowerCase();if(i!==n){const s=De(i.charCodeAt(0));e[s]=s}}}function Ii(t,e){return at(t.value,n=>{if(typeof n=="number")return G(e,n);{const r=n;return at(e,i=>r.from<=i&&i<=r.to)!==void 0}})}function Xn(t){const e=t.quantifier;return e&&e.atLeast===0?!0:t.value?_(t.value)?ce(t.value,Xn):Xn(t.value):!1}class Nf extends Nr{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){G(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?Ii(e,this.targetCharCodes)===void 0&&(this.found=!0):Ii(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function _r(t,e){if(e instanceof RegExp){const n=Nn(e),r=new Nf(t);return r.visit(n),r.found}else return at(e,n=>G(t,n.charCodeAt(0)))!==void 0}const Ve="PATTERN",gt="defaultMode",Wt="modes";let ys=typeof new RegExp("(?:)").sticky=="boolean";function _f(t,e){e=Sr(e,{useSticky:ys,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(m,p)=>p()});const n=e.tracer;n("initCharCodeToOptimizedIndexMap",()=>{Yf()});let r;n("Reject Lexer.NA",()=>{r=Sn(t,m=>m[Ve]===D.NA)});let i=!1,s;n("Transform Patterns",()=>{i=!1,s=A(r,m=>{const p=m[Ve];if(Ce(p)){const E=p.source;return E.length===1&&E!=="^"&&E!=="$"&&E!=="."&&!p.ignoreCase?E:E.length===2&&E[0]==="\\"&&!G(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],E[1])?E[1]:e.useSticky?Si(p):Ri(p)}else{if(ve(p))return i=!0,{exec:p};if(typeof p=="object")return i=!0,p;if(typeof p=="string"){if(p.length===1)return p;{const E=p.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),y=new RegExp(E);return e.useSticky?Si(y):Ri(y)}}else throw Error("non exhaustive match")}})});let a,o,c,l,u;n("misc mapping",()=>{a=A(r,m=>m.tokenTypeIdx),o=A(r,m=>{const p=m.GROUP;if(p!==D.SKIPPED){if(W(p))return p;if(xe(p))return!1;throw Error("non exhaustive match")}}),c=A(r,m=>{const p=m.LONGER_ALT;if(p)return _(p)?A(p,y=>mi(r,y)):[mi(r,p)]}),l=A(r,m=>m.PUSH_MODE),u=A(r,m=>S(m,"POP_MODE"))});let h;n("Line Terminator Handling",()=>{const m=Ls(e.lineTerminatorCharacters);h=A(r,p=>!1),e.positionTracking!=="onlyOffset"&&(h=A(r,p=>S(p,"LINE_BREAKS")?!!p.LINE_BREAKS:xs(p,m)===!1&&_r(m,p.PATTERN)))});let f,d,g,I;n("Misc Mapping #2",()=>{f=A(r,Cs),d=A(s,Hf),g=q(r,(m,p)=>{const E=p.GROUP;return W(E)&&E!==D.SKIPPED&&(m[E]=[]),m},{}),I=A(s,(m,p)=>({pattern:s[p],longerAlt:c[p],canLineTerminator:h[p],isCustom:f[p],short:d[p],group:o[p],push:l[p],pop:u[p],tokenTypeIdx:a[p],tokenType:r[p]}))});let R=!0,T=[];return e.safeMode||n("First Char Optimization",()=>{T=q(r,(m,p,E)=>{if(typeof p.PATTERN=="string"){const y=p.PATTERN.charCodeAt(0),se=De(y);Mn(m,se,I[E])}else if(_(p.START_CHARS_HINT)){let y;O(p.START_CHARS_HINT,se=>{const be=typeof se=="string"?se.charCodeAt(0):se,Ke=De(be);y!==Ke&&(y=Ke,Mn(m,Ke,I[E]))})}else if(Ce(p.PATTERN))if(p.PATTERN.unicode)R=!1,e.ensureOptimizations&&Vn(`${rn}	Unable to analyze < ${p.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const y=Sf(p.PATTERN,e.ensureOptimizations);x(y)&&(R=!1),O(y,se=>{Mn(m,se,I[E])})}else e.ensureOptimizations&&Vn(`${rn}	TokenType: <${p.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),R=!1;return m},[])}),{emptyGroups:g,patternIdxToConfig:I,charCodeToPatternIdxToConfig:T,hasCustom:i,canBeOptimized:R}}function yf(t,e){let n=[];const r=xf(t);n=n.concat(r.errors);const i=Lf(r.valid),s=i.valid;return n=n.concat(i.errors),n=n.concat(Cf(s)),n=n.concat(Uf(s)),n=n.concat($f(s,e)),n=n.concat(Df(s)),n}function Cf(t){let e=[];const n=ie(t,r=>Ce(r[Ve]));return e=e.concat(kf(n)),e=e.concat(wf(n)),e=e.concat(Mf(n)),e=e.concat(Ff(n)),e=e.concat(Pf(n)),e}function xf(t){const e=ie(t,i=>!S(i,Ve)),n=A(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:P.MISSING_PATTERN,tokenTypes:[i]})),r=Rn(t,e);return{errors:n,valid:r}}function Lf(t){const e=ie(t,i=>{const s=i[Ve];return!Ce(s)&&!ve(s)&&!S(s,"exec")&&!W(s)}),n=A(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:P.INVALID_PATTERN,tokenTypes:[i]})),r=Rn(t,e);return{errors:n,valid:r}}const vf=/[^\\][$]/;function kf(t){class e extends Nr{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}const n=ie(t,i=>{const s=i.PATTERN;try{const a=Nn(s),o=new e;return o.visit(a),o.found}catch{return vf.test(s.source)}});return A(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:P.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Pf(t){const e=ie(t,r=>r.PATTERN.test(""));return A(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:P.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}const bf=/[^\\[][\^]|^\^/;function wf(t){class e extends Nr{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}const n=ie(t,i=>{const s=i.PATTERN;try{const a=Nn(s),o=new e;return o.visit(a),o.found}catch{return bf.test(s.source)}});return A(n,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:P.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Mf(t){const e=ie(t,r=>{const i=r[Ve];return i instanceof RegExp&&(i.multiline||i.global)});return A(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:P.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function Ff(t){const e=[];let n=A(t,s=>q(t,(a,o)=>(s.PATTERN.source===o.PATTERN.source&&!G(e,o)&&o.PATTERN!==D.NA&&(e.push(o),a.push(o)),a),[]));n=Pt(n);const r=ie(n,s=>s.length>1);return A(r,s=>{const a=A(s,c=>c.name);return{message:`The same RegExp pattern ->${ue(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:P.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function Uf(t){const e=ie(t,r=>{if(!S(r,"GROUP"))return!1;const i=r.GROUP;return i!==D.SKIPPED&&i!==D.NA&&!W(i)});return A(e,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:P.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function $f(t,e){const n=ie(t,i=>i.PUSH_MODE!==void 0&&!G(e,i.PUSH_MODE));return A(n,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:P.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function Df(t){const e=[],n=q(t,(r,i,s)=>{const a=i.PATTERN;return a===D.NA||(W(a)?r.push({str:a,idx:s,tokenType:i}):Ce(a)&&Gf(a)&&r.push({str:a.source,idx:s,tokenType:i})),r},[]);return O(t,(r,i)=>{O(n,({str:s,idx:a,tokenType:o})=>{if(i<a&&Bf(s,r.PATTERN)){const c=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${r.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:c,type:P.UNREACHABLE_PATTERN,tokenTypes:[r,o]})}})}),e}function Bf(t,e){if(Ce(e)){const n=e.exec(t);return n!==null&&n.index===0}else{if(ve(e))return e(t,0,[],{});if(S(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function Gf(t){return at([".","\\","[","]","|","^","$","(",")","?","*","+","{"],n=>t.source.indexOf(n)!==-1)===void 0}function Ri(t){const e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function Si(t){const e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function Kf(t,e,n){const r=[];return S(t,gt)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+gt+`> property in its definition
`,type:P.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),S(t,Wt)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+Wt+`> property in its definition
`,type:P.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),S(t,Wt)&&S(t,gt)&&!S(t.modes,t.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${gt}: <${t.defaultMode}>which does not exist
`,type:P.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),S(t,Wt)&&O(t.modes,(i,s)=>{O(i,(a,o)=>{if(xe(a))r.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,type:P.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(S(a,"LONGER_ALT")){const c=_(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];O(c,l=>{!xe(l)&&!G(i,l)&&r.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${l.name}> on token <${a.name}> outside of mode <${s}>
`,type:P.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),r}function Wf(t,e,n){const r=[];let i=!1;const s=Pt(oe(w(t.modes))),a=Sn(s,c=>c[Ve]===D.NA),o=Ls(n);return e&&O(a,c=>{const l=xs(c,o);if(l!==!1){const h={message:Vf(c,l),type:l.issue,tokenType:c};r.push(h)}else S(c,"LINE_BREAKS")?c.LINE_BREAKS===!0&&(i=!0):_r(o,c.PATTERN)&&(i=!0)}),e&&!i&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:P.NO_LINE_BREAKS_FLAGS}),r}function jf(t){const e={},n=re(t);return O(n,r=>{const i=t[r];if(_(i))e[r]=[];else throw Error("non exhaustive match")}),e}function Cs(t){const e=t.PATTERN;if(Ce(e))return!1;if(ve(e))return!0;if(S(e,"exec"))return!0;if(W(e))return!1;throw Error("non exhaustive match")}function Hf(t){return W(t)&&t.length===1?t.charCodeAt(0):!1}const zf={test:function(t){const e=t.length;for(let n=this.lastIndex;n<e;n++){const r=t.charCodeAt(n);if(r===10)return this.lastIndex=n+1,!0;if(r===13)return t.charCodeAt(n+1)===10?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function xs(t,e){if(S(t,"LINE_BREAKS"))return!1;if(Ce(t.PATTERN)){try{_r(e,t.PATTERN)}catch(n){return{issue:P.IDENTIFY_TERMINATOR,errMsg:n.message}}return!1}else{if(W(t.PATTERN))return!1;if(Cs(t))return{issue:P.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function Vf(t,e){if(e.issue===P.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===P.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Ls(t){return A(t,n=>W(n)?n.charCodeAt(0):n)}function Mn(t,e,n){t[e]===void 0?t[e]=[n]:t[e].push(n)}const Tt=256;let Yt=[];function De(t){return t<Tt?t:Yt[t]}function Yf(){if(x(Yt)){Yt=new Array(65536);for(let t=0;t<65536;t++)Yt[t]=t>255?255+~~(t/255):t}}function wt(t,e){const n=t.tokenTypeIdx;return n===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[n]===!0}function sn(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}let Oi=1;const vs={};function Mt(t){const e=Xf(t);qf(e),Qf(e),Zf(e),O(e,n=>{n.isParent=n.categoryMatches.length>0})}function Xf(t){let e=U(t),n=t,r=!0;for(;r;){n=Pt(oe(A(n,s=>s.CATEGORIES)));const i=Rn(n,e);e=e.concat(i),x(i)?r=!1:n=i}return e}function qf(t){O(t,e=>{Ps(e)||(vs[Oi]=e,e.tokenTypeIdx=Oi++),Ni(e)&&!_(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Ni(e)||(e.CATEGORIES=[]),Jf(e)||(e.categoryMatches=[]),ed(e)||(e.categoryMatchesMap={})})}function Zf(t){O(t,e=>{e.categoryMatches=[],O(e.categoryMatchesMap,(n,r)=>{e.categoryMatches.push(vs[r].tokenTypeIdx)})})}function Qf(t){O(t,e=>{ks([],e)})}function ks(t,e){O(t,n=>{e.categoryMatchesMap[n.tokenTypeIdx]=!0}),O(e.CATEGORIES,n=>{const r=t.concat(e);G(r,n)||ks(r,n)})}function Ps(t){return S(t,"tokenTypeIdx")}function Ni(t){return S(t,"CATEGORIES")}function Jf(t){return S(t,"categoryMatches")}function ed(t){return S(t,"categoryMatchesMap")}function td(t){return S(t,"tokenTypeIdx")}const nd={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,n,r,i){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${n} characters.`}};var P;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(P||(P={}));const Et={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:nd,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Et);class D{constructor(e,n=Et){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${i}>`);const{time:o,value:c}=Ss(s),l=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(`${a}<-- <${i}> time: ${o}ms`),this.traceInitIndent--,c}else return s()},typeof n=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=X({},Et,n);const r=this.config.traceInitPerf;r===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof r=="number"&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Et.lineTerminatorsPattern)this.config.lineTerminatorsPattern=zf;else if(this.config.lineTerminatorCharacters===Et.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(n.safeMode&&n.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),_(e)?i={modes:{defaultMode:U(e)},defaultMode:gt}:(s=!1,i=U(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Kf(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Wf(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},O(i.modes,(o,c)=>{i.modes[c]=Sn(o,l=>xe(l))});const a=re(i.modes);if(O(i.modes,(o,c)=>{this.TRACE_INIT(`Mode: <${c}> processing`,()=>{if(this.modes.push(c),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(yf(o,a))}),x(this.lexerDefinitionErrors)){Mt(o);let l;this.TRACE_INIT("analyzeTokenTypes",()=>{l=_f(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:n.positionTracking,ensureOptimizations:n.ensureOptimizations,safeMode:n.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[c]=l.patternIdxToConfig,this.charCodeToPatternIdxToConfig[c]=l.charCodeToPatternIdxToConfig,this.emptyGroups=X({},this.emptyGroups,l.emptyGroups),this.hasCustom=l.hasCustom||this.hasCustom,this.canModeBeOptimized[c]=l.canBeOptimized}})}),this.defaultMode=i.defaultMode,!x(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const c=A(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+c)}O(this.lexerDefinitionWarning,o=>{Rs(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(ys?(this.chopInput=rt,this.match=this.matchWithTest):(this.updateLastIndex=b,this.match=this.matchWithExec),s&&(this.handleModes=b),this.trackStartLines===!1&&(this.computeNewColumn=rt),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=b),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const o=q(this.canModeBeOptimized,(c,l,u)=>(l===!1&&c.push(u),c),[]);if(n.ensureOptimizations&&!x(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{Rf()}),this.TRACE_INIT("toFastProperties",()=>{Os(this)})})}tokenize(e,n=this.defaultMode){if(!x(this.lexerDefinitionErrors)){const i=A(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(e,n)}tokenizeInternal(e,n){let r,i,s,a,o,c,l,u,h,f,d,g,I,R,T;const m=e,p=m.length;let E=0,y=0;const se=this.hasCustom?0:Math.floor(e.length/10),be=new Array(se),Ke=[];let lt=this.trackStartLines?1:void 0,we=this.trackStartLines?1:void 0;const ut=jf(this.emptyGroups),ra=this.trackStartLines,xn=this.config.lineTerminatorsPattern;let Ut=0,Me=[],ht=[];const $t=[],Pr=[];Object.freeze(Pr);let ft;function br(){return Me}function wr($){const Q=De($),Qe=ht[Q];return Qe===void 0?Pr:Qe}const ia=$=>{if($t.length===1&&$.tokenType.PUSH_MODE===void 0){const Q=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage($);Ke.push({offset:$.startOffset,line:$.startLine,column:$.startColumn,length:$.image.length,message:Q})}else{$t.pop();const Q=st($t);Me=this.patternIdxToConfig[Q],ht=this.charCodeToPatternIdxToConfig[Q],Ut=Me.length;const Qe=this.canModeBeOptimized[Q]&&this.config.safeMode===!1;ht&&Qe?ft=wr:ft=br}};function Mr($){$t.push($),ht=this.charCodeToPatternIdxToConfig[$],Me=this.patternIdxToConfig[$],Ut=Me.length,Ut=Me.length;const Q=this.canModeBeOptimized[$]&&this.config.safeMode===!1;ht&&Q?ft=wr:ft=br}Mr.call(this,n);let ae;const Fr=this.config.recoveryEnabled;for(;E<p;){c=null;const $=m.charCodeAt(E),Q=ft($),Qe=Q.length;for(r=0;r<Qe;r++){ae=Q[r];const H=ae.pattern;l=null;const Oe=ae.short;if(Oe!==!1?$===Oe&&(c=H):ae.isCustom===!0?(T=H.exec(m,E,be,ut),T!==null?(c=T[0],T.payload!==void 0&&(l=T.payload)):c=null):(this.updateLastIndex(H,E),c=this.match(H,e,E)),c!==null){if(o=ae.longerAlt,o!==void 0){const Fe=o.length;for(s=0;s<Fe;s++){const Ne=Me[o[s]],We=Ne.pattern;if(u=null,Ne.isCustom===!0?(T=We.exec(m,E,be,ut),T!==null?(a=T[0],T.payload!==void 0&&(u=T.payload)):a=null):(this.updateLastIndex(We,E),a=this.match(We,e,E)),a&&a.length>c.length){c=a,l=u,ae=Ne;break}}}break}}if(c!==null){if(h=c.length,f=ae.group,f!==void 0&&(d=ae.tokenTypeIdx,g=this.createTokenInstance(c,E,d,ae.tokenType,lt,we,h),this.handlePayload(g,l),f===!1?y=this.addToken(be,y,g):ut[f].push(g)),e=this.chopInput(e,h),E=E+h,we=this.computeNewColumn(we,h),ra===!0&&ae.canLineTerminator===!0){let H=0,Oe,Fe;xn.lastIndex=0;do Oe=xn.test(c),Oe===!0&&(Fe=xn.lastIndex-1,H++);while(Oe===!0);H!==0&&(lt=lt+H,we=h-Fe,this.updateTokenEndLineColumnLocation(g,f,Fe,H,lt,we,h))}this.handleModes(ae,ia,Mr,g)}else{const H=E,Oe=lt,Fe=we;let Ne=Fr===!1;for(;Ne===!1&&E<p;)for(e=this.chopInput(e,1),E++,i=0;i<Ut;i++){const We=Me[i],Ln=We.pattern,Ur=We.short;if(Ur!==!1?m.charCodeAt(E)===Ur&&(Ne=!0):We.isCustom===!0?Ne=Ln.exec(m,E,be,ut)!==null:(this.updateLastIndex(Ln,E),Ne=Ln.exec(e)!==null),Ne===!0)break}if(I=E-H,we=this.computeNewColumn(we,I),R=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(m,H,I,Oe,Fe),Ke.push({offset:H,line:Oe,column:Fe,length:I,message:R}),Fr===!1)break}}return this.hasCustom||(be.length=y),{tokens:be,groups:ut,errors:Ke}}handleModes(e,n,r,i){if(e.pop===!0){const s=e.push;n(i),s!==void 0&&r.call(this,s)}else e.push!==void 0&&r.call(this,e.push)}chopInput(e,n){return e.substring(n)}updateLastIndex(e,n){e.lastIndex=n}updateTokenEndLineColumnLocation(e,n,r,i,s,a,o){let c,l;n!==void 0&&(c=r===o-1,l=c?-1:0,i===1&&c===!0||(e.endLine=s+l,e.endColumn=a-1+-l))}computeNewColumn(e,n){return e+n}createOffsetOnlyToken(e,n,r,i){return{image:e,startOffset:n,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(e,n,r,i,s,a){return{image:e,startOffset:n,startLine:s,startColumn:a,tokenTypeIdx:r,tokenType:i}}createFullToken(e,n,r,i,s,a,o){return{image:e,startOffset:n,endOffset:n+o-1,startLine:s,endLine:s,startColumn:a,endColumn:a+o-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(e,n,r){return e.push(r),n}addTokenUsingMemberAccess(e,n,r){return e[n]=r,n++,n}handlePayloadNoCustom(e,n){}handlePayloadWithCustom(e,n){n!==null&&(e.payload=n)}matchWithTest(e,n,r){return e.test(n)===!0?n.substring(r,e.lastIndex):null}matchWithExec(e,n){const r=e.exec(n);return r!==null?r[0]:null}}D.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";D.NA=/NOT_APPLICABLE/;function It(t){return bs(t)?t.LABEL:t.name}function bs(t){return W(t.LABEL)&&t.LABEL!==""}const rd="parent",_i="categories",yi="label",Ci="group",xi="push_mode",Li="pop_mode",vi="longer_alt",ki="line_breaks",Pi="start_chars_hint";function pe(t){return id(t)}function id(t){const e=t.pattern,n={};if(n.name=t.name,xe(e)||(n.PATTERN=e),S(t,rd))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return S(t,_i)&&(n.CATEGORIES=t[_i]),Mt([n]),S(t,yi)&&(n.LABEL=t[yi]),S(t,Ci)&&(n.GROUP=t[Ci]),S(t,Li)&&(n.POP_MODE=t[Li]),S(t,xi)&&(n.PUSH_MODE=t[xi]),S(t,vi)&&(n.LONGER_ALT=t[vi]),S(t,ki)&&(n.LINE_BREAKS=t[ki]),S(t,Pi)&&(n.START_CHARS_HINT=t[Pi]),n}const Ye=pe({name:"EOF",pattern:D.NA});Mt([Ye]);function yr(t,e,n,r,i,s,a,o){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:s,startColumn:a,endColumn:o,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function sd(t,e){return wt(t,e)}const ws={buildMismatchTokenMessage({expected:t,actual:e,previous:n,ruleName:r}){return`Expecting ${bs(t)?`--> ${It(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:n,customUserDescription:r,ruleName:i}){const s="Expecting: ",o=`
but found: '`+ue(e).image+"'";if(r)return s+r+o;{const c=q(t,(f,d)=>f.concat(d),[]),l=A(c,f=>`[${A(f,d=>It(d)).join(", ")}]`),h=`one of these possible Token sequences:
${A(l,(f,d)=>`  ${d+1}. ${f}`).join(`
`)}`;return s+h+o}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:n,ruleName:r}){const i="Expecting: ",a=`
but found: '`+ue(e).image+"'";if(n)return i+n+a;{const c=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${A(t,l=>`[${A(l,u=>It(u)).join(",")}]`).join(" ,")}>`;return i+c+a}}};Object.freeze(ws);const ad={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},je={buildDuplicateFoundError(t,e){function n(u){return u instanceof v?u.terminalType.name:u instanceof Z?u.nonTerminalName:""}const r=t.name,i=ue(e),s=i.idx,a=me(i),o=n(i),c=s>0;let l=`->${a}${c?s:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${r}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,`
`),l},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){const e=A(t.prefixPath,i=>It(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){const e=A(t.prefixPath,i=>It(i)).join(", "),n=t.alternation.idx===0?"":t.alternation.idx;let r=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${n}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError(t){let e=me(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){const e=t.topLevelRule.name,n=A(t.leftRecursionPath,s=>s.name),r=`${e} --> ${n.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${r}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof ot?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function od(t,e){const n=new cd(t,e);return n.resolveRefs(),n.errors}class cd extends ct{constructor(e,n){super(),this.nameToTopRule=e,this.errMsgProvider=n,this.errors=[]}resolveRefs(){O(w(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const n=this.nameToTopRule[e.nonTerminalName];if(n)e.referencedRule=n;else{const r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:B.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}class ld extends On{constructor(e,n){super(),this.topProd=e,this.path=n,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=U(this.path.ruleStack).reverse(),this.occurrenceStack=U(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,n=[]){this.found||super.walk(e,n)}walkProdRef(e,n,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const i=n.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){x(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class ud extends ld{constructor(e,n){super(e,n),this.path=n,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,n,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const i=n.concat(r),s=new j({definition:i});this.possibleTokTypes=bt(s),this.found=!0}}}class _n extends On{constructor(e,n){super(),this.topRule=e,this.occurrence=n,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class hd extends _n{walkMany(e,n,r){if(e.idx===this.occurrence){const i=ue(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof v&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,n,r)}}class bi extends _n{walkManySep(e,n,r){if(e.idx===this.occurrence){const i=ue(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof v&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,n,r)}}class fd extends _n{walkAtLeastOne(e,n,r){if(e.idx===this.occurrence){const i=ue(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof v&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,n,r)}}class wi extends _n{walkAtLeastOneSep(e,n,r){if(e.idx===this.occurrence){const i=ue(n.concat(r));this.result.isEndOfRule=i===void 0,i instanceof v&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,n,r)}}function qn(t,e,n=[]){n=U(n);let r=[],i=0;function s(o){return o.concat(F(t,i+1))}function a(o){const c=qn(s(o),e,n);return r.concat(c)}for(;n.length<e&&i<t.length;){const o=t[i];if(o instanceof j)return a(o.definition);if(o instanceof Z)return a(o.definition);if(o instanceof K)r=a(o.definition);else if(o instanceof Re){const c=o.definition.concat([new M({definition:o.definition})]);return a(c)}else if(o instanceof Se){const c=[new j({definition:o.definition}),new M({definition:[new v({terminalType:o.separator})].concat(o.definition)})];return a(c)}else if(o instanceof fe){const c=o.definition.concat([new M({definition:[new v({terminalType:o.separator})].concat(o.definition)})]);r=a(c)}else if(o instanceof M){const c=o.definition.concat([new M({definition:o.definition})]);r=a(c)}else{if(o instanceof de)return O(o.definition,c=>{x(c.definition)===!1&&(r=a(c.definition))}),r;if(o instanceof v)n.push(o.terminalType);else throw Error("non exhaustive match")}i++}return r.push({partialPath:n,suffixDef:F(t,i)}),r}function Ms(t,e,n,r){const i="EXIT_NONE_TERMINAL",s=[i],a="EXIT_ALTERNATIVE";let o=!1;const c=e.length,l=c-r-1,u=[],h=[];for(h.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!x(h);){const f=h.pop();if(f===a){o&&st(h).idx<=l&&h.pop();continue}const d=f.def,g=f.idx,I=f.ruleStack,R=f.occurrenceStack;if(x(d))continue;const T=d[0];if(T===i){const m={idx:g,def:F(d),ruleStack:Ct(I),occurrenceStack:Ct(R)};h.push(m)}else if(T instanceof v)if(g<c-1){const m=g+1,p=e[m];if(n(p,T.terminalType)){const E={idx:m,def:F(d),ruleStack:I,occurrenceStack:R};h.push(E)}}else if(g===c-1)u.push({nextTokenType:T.terminalType,nextTokenOccurrence:T.idx,ruleStack:I,occurrenceStack:R}),o=!0;else throw Error("non exhaustive match");else if(T instanceof Z){const m=U(I);m.push(T.nonTerminalName);const p=U(R);p.push(T.idx);const E={idx:g,def:T.definition.concat(s,F(d)),ruleStack:m,occurrenceStack:p};h.push(E)}else if(T instanceof K){const m={idx:g,def:F(d),ruleStack:I,occurrenceStack:R};h.push(m),h.push(a);const p={idx:g,def:T.definition.concat(F(d)),ruleStack:I,occurrenceStack:R};h.push(p)}else if(T instanceof Re){const m=new M({definition:T.definition,idx:T.idx}),p=T.definition.concat([m],F(d)),E={idx:g,def:p,ruleStack:I,occurrenceStack:R};h.push(E)}else if(T instanceof Se){const m=new v({terminalType:T.separator}),p=new M({definition:[m].concat(T.definition),idx:T.idx}),E=T.definition.concat([p],F(d)),y={idx:g,def:E,ruleStack:I,occurrenceStack:R};h.push(y)}else if(T instanceof fe){const m={idx:g,def:F(d),ruleStack:I,occurrenceStack:R};h.push(m),h.push(a);const p=new v({terminalType:T.separator}),E=new M({definition:[p].concat(T.definition),idx:T.idx}),y=T.definition.concat([E],F(d)),se={idx:g,def:y,ruleStack:I,occurrenceStack:R};h.push(se)}else if(T instanceof M){const m={idx:g,def:F(d),ruleStack:I,occurrenceStack:R};h.push(m),h.push(a);const p=new M({definition:T.definition,idx:T.idx}),E=T.definition.concat([p],F(d)),y={idx:g,def:E,ruleStack:I,occurrenceStack:R};h.push(y)}else if(T instanceof de)for(let m=T.definition.length-1;m>=0;m--){const p=T.definition[m],E={idx:g,def:p.definition.concat(F(d)),ruleStack:I,occurrenceStack:R};h.push(E),h.push(a)}else if(T instanceof j)h.push({idx:g,def:T.definition.concat(F(d)),ruleStack:I,occurrenceStack:R});else if(T instanceof ot)h.push(dd(T,g,I,R));else throw Error("non exhaustive match")}return u}function dd(t,e,n,r){const i=U(n);i.push(t.name);const s=U(r);return s.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:s}}var k;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(k||(k={}));function Fs(t){if(t instanceof K||t==="Option")return k.OPTION;if(t instanceof M||t==="Repetition")return k.REPETITION;if(t instanceof Re||t==="RepetitionMandatory")return k.REPETITION_MANDATORY;if(t instanceof Se||t==="RepetitionMandatoryWithSeparator")return k.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof fe||t==="RepetitionWithSeparator")return k.REPETITION_WITH_SEPARATOR;if(t instanceof de||t==="Alternation")return k.ALTERNATION;throw Error("non exhaustive match")}function pd(t,e,n,r,i,s){const a=Cr(t,e,n),o=Ds(a)?sn:wt;return s(a,r,o,i)}function md(t,e,n,r,i,s){const a=xr(t,e,i,n),o=Ds(a)?sn:wt;return s(a[0],o,r)}function gd(t,e,n,r){const i=t.length,s=ce(t,a=>ce(a,o=>o.length===1));if(e)return function(a){const o=A(a,c=>c.GATE);for(let c=0;c<i;c++){const l=t[c],u=l.length,h=o[c];if(!(h!==void 0&&h.call(this)===!1))e:for(let f=0;f<u;f++){const d=l[f],g=d.length;for(let I=0;I<g;I++){const R=this.LA(I+1);if(n(R,d[I])===!1)continue e}return c}}};if(s&&!r){const a=A(t,c=>oe(c)),o=q(a,(c,l,u)=>(O(l,h=>{S(c,h.tokenTypeIdx)||(c[h.tokenTypeIdx]=u),O(h.categoryMatches,f=>{S(c,f)||(c[f]=u)})}),c),{});return function(){const c=this.LA(1);return o[c.tokenTypeIdx]}}else return function(){for(let a=0;a<i;a++){const o=t[a],c=o.length;e:for(let l=0;l<c;l++){const u=o[l],h=u.length;for(let f=0;f<h;f++){const d=this.LA(f+1);if(n(d,u[f])===!1)continue e}return a}}}}function Td(t,e,n){const r=ce(t,s=>s.length===1),i=t.length;if(r&&!n){const s=oe(t);if(s.length===1&&x(s[0].categoryMatches)){const o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const a=q(s,(o,c,l)=>(o[c.tokenTypeIdx]=!0,O(c.categoryMatches,u=>{o[u]=!0}),o),[]);return function(){const o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<i;s++){const a=t[s],o=a.length;for(let c=0;c<o;c++){const l=this.LA(c+1);if(e(l,a[c])===!1)continue e}return!0}return!1}}class Ed extends On{constructor(e,n,r){super(),this.topProd=e,this.targetOccurrence=n,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,n,r,i){return e.idx===this.targetOccurrence&&this.targetProdType===n?(this.restDef=r.concat(i),!0):!1}walkOption(e,n,r){this.checkIsTarget(e,k.OPTION,n,r)||super.walkOption(e,n,r)}walkAtLeastOne(e,n,r){this.checkIsTarget(e,k.REPETITION_MANDATORY,n,r)||super.walkOption(e,n,r)}walkAtLeastOneSep(e,n,r){this.checkIsTarget(e,k.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}walkMany(e,n,r){this.checkIsTarget(e,k.REPETITION,n,r)||super.walkOption(e,n,r)}walkManySep(e,n,r){this.checkIsTarget(e,k.REPETITION_WITH_SEPARATOR,n,r)||super.walkOption(e,n,r)}}class Us extends ct{constructor(e,n,r){super(),this.targetOccurrence=e,this.targetProdType=n,this.targetRef=r,this.result=[]}checkIsTarget(e,n){e.idx===this.targetOccurrence&&this.targetProdType===n&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,k.OPTION)}visitRepetition(e){this.checkIsTarget(e,k.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,k.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,k.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,k.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,k.ALTERNATION)}}function Mi(t){const e=new Array(t);for(let n=0;n<t;n++)e[n]=[];return e}function Fn(t){let e=[""];for(let n=0;n<t.length;n++){const r=t[n],i=[];for(let s=0;s<e.length;s++){const a=e[s];i.push(a+"_"+r.tokenTypeIdx);for(let o=0;o<r.categoryMatches.length;o++){const c="_"+r.categoryMatches[o];i.push(a+c)}}e=i}return e}function Ad(t,e,n){for(let r=0;r<t.length;r++){if(r===n)continue;const i=t[r];for(let s=0;s<e.length;s++){const a=e[s];if(i[a]===!0)return!1}}return!0}function $s(t,e){const n=A(t,a=>qn([a],1)),r=Mi(n.length),i=A(n,a=>{const o={};return O(a,c=>{const l=Fn(c.partialPath);O(l,u=>{o[u]=!0})}),o});let s=n;for(let a=1;a<=e;a++){const o=s;s=Mi(o.length);for(let c=0;c<o.length;c++){const l=o[c];for(let u=0;u<l.length;u++){const h=l[u].partialPath,f=l[u].suffixDef,d=Fn(h);if(Ad(i,d,c)||x(f)||h.length===e){const I=r[c];if(Zn(I,h)===!1){I.push(h);for(let R=0;R<d.length;R++){const T=d[R];i[c][T]=!0}}}else{const I=qn(f,a+1,h);s[c]=s[c].concat(I),O(I,R=>{const T=Fn(R.partialPath);O(T,m=>{i[c][m]=!0})})}}}}return r}function Cr(t,e,n,r){const i=new Us(t,k.ALTERNATION,r);return e.accept(i),$s(i.result,n)}function xr(t,e,n,r){const i=new Us(t,n);e.accept(i);const s=i.result,o=new Ed(e,t,n).startWalking(),c=new j({definition:s}),l=new j({definition:o});return $s([c,l],r)}function Zn(t,e){e:for(let n=0;n<t.length;n++){const r=t[n];if(r.length===e.length){for(let i=0;i<r.length;i++){const s=e[i],a=r[i];if((s===a||a.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function Id(t,e){return t.length<e.length&&ce(t,(n,r)=>{const i=e[r];return n===i||i.categoryMatchesMap[n.tokenTypeIdx]})}function Ds(t){return ce(t,e=>ce(e,n=>ce(n,r=>x(r.categoryMatches))))}function Rd(t){const e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return A(e,n=>Object.assign({type:B.CUSTOM_LOOKAHEAD_VALIDATION},n))}function Sd(t,e,n,r){const i=ee(t,c=>Od(c,n)),s=Md(t,e,n),a=ee(t,c=>kd(c,n)),o=ee(t,c=>yd(c,t,r,n));return i.concat(s,a,o)}function Od(t,e){const n=new _d;t.accept(n);const r=n.allProductions,i=Mh(r,Nd),s=he(i,o=>o.length>1);return A(w(s),o=>{const c=ue(o),l=e.buildDuplicateFoundError(t,o),u=me(c),h={message:l,type:B.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:u,occurrence:c.idx},f=Bs(c);return f&&(h.parameter=f),h})}function Nd(t){return`${me(t)}_#_${t.idx}_#_${Bs(t)}`}function Bs(t){return t instanceof v?t.terminalType.name:t instanceof Z?t.nonTerminalName:""}class _d extends ct{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function yd(t,e,n,r){const i=[];if(q(e,(a,o)=>o.name===t.name?a+1:a,0)>1){const a=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});i.push({message:a,type:B.DUPLICATE_RULE_NAME,ruleName:t.name})}return i}function Cd(t,e,n){const r=[];let i;return G(e,t)||(i=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${n}<-as it is not defined in any of the super grammars `,r.push({message:i,type:B.INVALID_RULE_OVERRIDE,ruleName:t})),r}function Gs(t,e,n,r=[]){const i=[],s=Xt(e.definition);if(x(s))return[];{const a=t.name;G(s,t)&&i.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:B.LEFT_RECURSION,ruleName:a});const c=Rn(s,r.concat([t])),l=ee(c,u=>{const h=U(r);return h.push(u),Gs(t,u,n,h)});return i.concat(l)}}function Xt(t){let e=[];if(x(t))return e;const n=ue(t);if(n instanceof Z)e.push(n.referencedRule);else if(n instanceof j||n instanceof K||n instanceof Re||n instanceof Se||n instanceof fe||n instanceof M)e=e.concat(Xt(n.definition));else if(n instanceof de)e=oe(A(n.definition,s=>Xt(s.definition)));else if(!(n instanceof v))throw Error("non exhaustive match");const r=en(n),i=t.length>1;if(r&&i){const s=F(t);return e.concat(Xt(s))}else return e}class Lr extends ct{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function xd(t,e){const n=new Lr;t.accept(n);const r=n.alternations;return ee(r,s=>{const a=Ct(s.definition);return ee(a,(o,c)=>{const l=Ms([o],[],wt,1);return x(l)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:s,emptyChoiceIdx:c}),type:B.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:s.idx,alternative:c+1}]:[]})})}function Ld(t,e,n){const r=new Lr;t.accept(r);let i=r.alternations;return i=Sn(i,a=>a.ignoreAmbiguities===!0),ee(i,a=>{const o=a.idx,c=a.maxLookahead||e,l=Cr(o,t,c,a),u=bd(l,a,t,n),h=wd(l,a,t,n);return u.concat(h)})}class vd extends ct{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function kd(t,e){const n=new Lr;t.accept(n);const r=n.alternations;return ee(r,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:s}),type:B.TOO_MANY_ALTS,ruleName:t.name,occurrence:s.idx}]:[])}function Pd(t,e,n){const r=[];return O(t,i=>{const s=new vd;i.accept(s);const a=s.allProductions;O(a,o=>{const c=Fs(o),l=o.maxLookahead||e,u=o.idx,f=xr(u,i,c,l)[0];if(x(oe(f))){const d=n.buildEmptyRepetitionError({topLevelRule:i,repetition:o});r.push({message:d,type:B.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),r}function bd(t,e,n,r){const i=[],s=q(t,(o,c,l)=>(e.definition[l].ignoreAmbiguities===!0||O(c,u=>{const h=[l];O(t,(f,d)=>{l!==d&&Zn(f,u)&&e.definition[d].ignoreAmbiguities!==!0&&h.push(d)}),h.length>1&&!Zn(i,u)&&(i.push(u),o.push({alts:h,path:u}))}),o),[]);return A(s,o=>{const c=A(o.alts,u=>u+1);return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:c,prefixPath:o.path}),type:B.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:o.alts}})}function wd(t,e,n,r){const i=q(t,(a,o,c)=>{const l=A(o,u=>({idx:c,path:u}));return a.concat(l)},[]);return Pt(ee(i,a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];const c=a.idx,l=a.path,u=ie(i,f=>e.definition[f.idx].ignoreAmbiguities!==!0&&f.idx<c&&Id(f.path,l));return A(u,f=>{const d=[f.idx+1,c+1],g=e.idx===0?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:d,prefixPath:f.path}),type:B.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:g,alternatives:d}})}))}function Md(t,e,n){const r=[],i=A(e,s=>s.name);return O(t,s=>{const a=s.name;if(G(i,a)){const o=n.buildNamespaceConflictError(s);r.push({message:o,type:B.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),r}function Fd(t){const e=Sr(t,{errMsgProvider:ad}),n={};return O(t.rules,r=>{n[r.name]=r}),od(n,e.errMsgProvider)}function Ud(t){return t=Sr(t,{errMsgProvider:je}),Sd(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}const Ks="MismatchedTokenException",Ws="NoViableAltException",js="EarlyExitException",Hs="NotAllInputParsedException",zs=[Ks,Ws,js,Hs];Object.freeze(zs);function xt(t){return G(zs,t.name)}class yn extends Error{constructor(e,n){super(e),this.token=n,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class Vs extends yn{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=Ks}}class $d extends yn{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=Ws}}class Dd extends yn{constructor(e,n){super(e,n),this.name=Hs}}class Bd extends yn{constructor(e,n,r){super(e,n),this.previousToken=r,this.name=js}}const Un={},Ys="InRuleRecoveryException";class Gd extends Error{constructor(e){super(e),this.name=Ys}}class Kd{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=S(e,"recoveryEnabled")?e.recoveryEnabled:Le.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Wd)}getTokenToInsert(e){const n=yr(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return n.isInsertedInRecovery=!0,n}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,n,r,i){const s=this.findReSyncTokenType(),a=this.exportLexerState(),o=[];let c=!1;const l=this.LA(1);let u=this.LA(1);const h=()=>{const f=this.LA(0),d=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:l,previous:f,ruleName:this.getCurrRuleFullName()}),g=new Vs(d,l,this.LA(0));g.resyncedTokens=Ct(o),this.SAVE_ERROR(g)};for(;!c;)if(this.tokenMatcher(u,i)){h();return}else if(r.call(this)){h(),e.apply(this,n);return}else this.tokenMatcher(u,s)?c=!0:(u=this.SKIP_TOKEN(),this.addToResyncTokens(u,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,n,r){return!(r===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,n)))}getFollowsForInRuleRecovery(e,n){const r=this.getCurrentGrammarPath(e,n);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,n){if(this.canRecoverWithSingleTokenInsertion(e,n))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new Gd("sad sad panda")}canPerformInRuleRecovery(e,n){return this.canRecoverWithSingleTokenInsertion(e,n)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,n){if(!this.canTokenTypeBeInsertedInRecovery(e)||x(n))return!1;const r=this.LA(1);return at(n,s=>this.tokenMatcher(r,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const n=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(n);return G(r,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let n=this.LA(1),r=2;for(;;){const i=at(e,s=>sd(n,s));if(i!==void 0)return i;n=this.LA(r),r++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Un;const e=this.getLastExplicitRuleShortName(),n=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:n,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return A(e,(r,i)=>i===0?Un:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:n[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){const e=A(this.buildFullFollowKeyStack(),n=>this.getFollowSetFromFollowKey(n));return oe(e)}getFollowSetFromFollowKey(e){if(e===Un)return[Ye];const n=e.ruleName+e.idxInCallingRule+Ns+e.inRule;return this.resyncFollows[n]}addToResyncTokens(e,n){return this.tokenMatcher(e,Ye)||n.push(e),n}reSyncTo(e){const n=[];let r=this.LA(1);for(;this.tokenMatcher(r,e)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,n);return Ct(n)}attemptInRepetitionRecovery(e,n,r,i,s,a,o){}getCurrentGrammarPath(e,n){const r=this.getHumanReadableRuleStack(),i=U(this.RULE_OCCURRENCE_STACK);return{ruleStack:r,occurrenceStack:i,lastTok:e,lastTokOccurrence:n}}getHumanReadableRuleStack(){return A(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function Wd(t,e,n,r,i,s,a){const o=this.getKeyForAutomaticLookahead(r,i);let c=this.firstAfterRepMap[o];if(c===void 0){const f=this.getCurrRuleFullName(),d=this.getGAstProductions()[f];c=new s(d,i).startWalking(),this.firstAfterRepMap[o]=c}let l=c.token,u=c.occurrence;const h=c.isEndOfRule;this.RULE_STACK.length===1&&h&&l===void 0&&(l=Ye,u=1),!(l===void 0||u===void 0)&&this.shouldInRepetitionRecoveryBeTried(l,u,a)&&this.tryInRepetitionRecovery(t,e,n,l)}const jd=4,Ge=8,Xs=1<<Ge,qs=2<<Ge,Qn=3<<Ge,Jn=4<<Ge,er=5<<Ge,qt=6<<Ge;function $n(t,e,n){return n|e|t}class Hd{constructor(e){var n;this.maxLookahead=(n=e==null?void 0:e.maxLookahead)!==null&&n!==void 0?n:Le.maxLookahead}validate(e){const n=this.validateNoLeftRecursion(e.rules);if(x(n)){const r=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...n,...r,...i,...s]}return n}validateNoLeftRecursion(e){return ee(e,n=>Gs(n,n,je))}validateEmptyOrAlternatives(e){return ee(e,n=>xd(n,je))}validateAmbiguousAlternationAlternatives(e,n){return ee(e,r=>Ld(r,n,je))}validateSomeNonEmptyLookaheadPath(e,n){return Pd(e,n,je)}buildLookaheadForAlternation(e){return pd(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,gd)}buildLookaheadForOptional(e){return md(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Fs(e.prodType),Td)}}class zd{initLooksAhead(e){this.dynamicTokensEnabled=S(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:Le.dynamicTokensEnabled,this.maxLookahead=S(e,"maxLookahead")?e.maxLookahead:Le.maxLookahead,this.lookaheadStrategy=S(e,"lookaheadStrategy")?e.lookaheadStrategy:new Hd({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){O(e,n=>{this.TRACE_INIT(`${n.name} Rule Lookahead`,()=>{const{alternation:r,repetition:i,option:s,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:c}=Yd(n);O(r,l=>{const u=l.idx===0?"":l.idx;this.TRACE_INIT(`${me(l)}${u}`,()=>{const h=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:l.idx,rule:n,maxLookahead:l.maxLookahead||this.maxLookahead,hasPredicates:l.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),f=$n(this.fullRuleNameToShort[n.name],Xs,l.idx);this.setLaFuncCache(f,h)})}),O(i,l=>{this.computeLookaheadFunc(n,l.idx,Qn,"Repetition",l.maxLookahead,me(l))}),O(s,l=>{this.computeLookaheadFunc(n,l.idx,qs,"Option",l.maxLookahead,me(l))}),O(a,l=>{this.computeLookaheadFunc(n,l.idx,Jn,"RepetitionMandatory",l.maxLookahead,me(l))}),O(o,l=>{this.computeLookaheadFunc(n,l.idx,qt,"RepetitionMandatoryWithSeparator",l.maxLookahead,me(l))}),O(c,l=>{this.computeLookaheadFunc(n,l.idx,er,"RepetitionWithSeparator",l.maxLookahead,me(l))})})})}computeLookaheadFunc(e,n,r,i,s,a){this.TRACE_INIT(`${a}${n===0?"":n}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:n,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),c=$n(this.fullRuleNameToShort[e.name],r,n);this.setLaFuncCache(c,o)})}getKeyForAutomaticLookahead(e,n){const r=this.getLastExplicitRuleShortName();return $n(r,e,n)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,n){this.lookAheadFuncsCache.set(e,n)}}class Vd extends ct{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const jt=new Vd;function Yd(t){jt.reset(),t.accept(jt);const e=jt.dslMethods;return jt.reset(),e}function Fi(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function Ui(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function Xd(t,e,n){t.children[n]===void 0?t.children[n]=[e]:t.children[n].push(e)}function qd(t,e,n){t.children[e]===void 0?t.children[e]=[n]:t.children[e].push(n)}const Zd="name";function Zs(t,e){Object.defineProperty(t,Zd,{enumerable:!1,configurable:!0,writable:!1,value:e})}function Qd(t,e){const n=re(t),r=n.length;for(let i=0;i<r;i++){const s=n[i],a=t[s],o=a.length;for(let c=0;c<o;c++){const l=a[c];l.tokenTypeIdx===void 0&&this[l.name](l.children,e)}}}function Jd(t,e){const n=function(){};Zs(n,t+"BaseSemantics");const r={visit:function(i,s){if(_(i)&&(i=i[0]),!xe(i))return this[i.name](i.children,s)},validateVisitor:function(){const i=tp(this,e);if(!x(i)){const s=A(i,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return n.prototype=r,n.prototype.constructor=n,n._RULE_NAMES=e,n}function ep(t,e,n){const r=function(){};Zs(r,t+"BaseSemanticsWithDefaults");const i=Object.create(n.prototype);return O(e,s=>{i[s]=Qd}),r.prototype=i,r.prototype.constructor=r,r}var tr;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})(tr||(tr={}));function tp(t,e){return np(t,e)}function np(t,e){const n=ie(e,i=>ve(t[i])===!1),r=A(n,i=>({msg:`Missing visitor method: <${i}> on ${t.constructor.name} CST Visitor.`,type:tr.MISSING_METHOD,methodName:i}));return Pt(r)}class rp{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=S(e,"nodeLocationTracking")?e.nodeLocationTracking:Le.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=b,this.cstFinallyStateUpdate=b,this.cstPostTerminal=b,this.cstPostNonTerminal=b,this.cstPostRule=b;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Ui,this.setNodeLocationFromNode=Ui,this.cstPostRule=b,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=b,this.setNodeLocationFromNode=b,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Fi,this.setNodeLocationFromNode=Fi,this.cstPostRule=b,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=b,this.setNodeLocationFromNode=b,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=b,this.setNodeLocationFromNode=b,this.cstPostRule=b,this.setInitialNodeLocation=b;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const n=this.LA(1);e.location={startOffset:n.startOffset,startLine:n.startLine,startColumn:n.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const n={name:e,children:Object.create(null)};this.setInitialNodeLocation(n),this.CST_STACK.push(n)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?(r.endOffset=n.endOffset,r.endLine=n.endLine,r.endColumn=n.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){const n=this.LA(0),r=e.location;r.startOffset<=n.startOffset?r.endOffset=n.endOffset:r.startOffset=NaN}cstPostTerminal(e,n){const r=this.CST_STACK[this.CST_STACK.length-1];Xd(r,n,e),this.setNodeLocationFromToken(r.location,n)}cstPostNonTerminal(e,n){const r=this.CST_STACK[this.CST_STACK.length-1];qd(r,n,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(xe(this.baseCstVisitorConstructor)){const e=Jd(this.className,re(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(xe(this.baseCstVisitorWithDefaultsConstructor)){const e=ep(this.className,re(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class ip{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):on}LA(e){const n=this.currIdx+e;return n<0||this.tokVectorLength<=n?on:this.tokVector[n]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class sp{ACTION(e){return e.call(this)}consume(e,n,r){return this.consumeInternal(n,e,r)}subrule(e,n,r){return this.subruleInternal(n,e,r)}option(e,n){return this.optionInternal(n,e)}or(e,n){return this.orInternal(n,e)}many(e,n){return this.manyInternal(e,n)}atLeastOne(e,n){return this.atLeastOneInternal(e,n)}CONSUME(e,n){return this.consumeInternal(e,0,n)}CONSUME1(e,n){return this.consumeInternal(e,1,n)}CONSUME2(e,n){return this.consumeInternal(e,2,n)}CONSUME3(e,n){return this.consumeInternal(e,3,n)}CONSUME4(e,n){return this.consumeInternal(e,4,n)}CONSUME5(e,n){return this.consumeInternal(e,5,n)}CONSUME6(e,n){return this.consumeInternal(e,6,n)}CONSUME7(e,n){return this.consumeInternal(e,7,n)}CONSUME8(e,n){return this.consumeInternal(e,8,n)}CONSUME9(e,n){return this.consumeInternal(e,9,n)}SUBRULE(e,n){return this.subruleInternal(e,0,n)}SUBRULE1(e,n){return this.subruleInternal(e,1,n)}SUBRULE2(e,n){return this.subruleInternal(e,2,n)}SUBRULE3(e,n){return this.subruleInternal(e,3,n)}SUBRULE4(e,n){return this.subruleInternal(e,4,n)}SUBRULE5(e,n){return this.subruleInternal(e,5,n)}SUBRULE6(e,n){return this.subruleInternal(e,6,n)}SUBRULE7(e,n){return this.subruleInternal(e,7,n)}SUBRULE8(e,n){return this.subruleInternal(e,8,n)}SUBRULE9(e,n){return this.subruleInternal(e,9,n)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,n,r=cn){if(G(this.definedRulesNames,e)){const a={message:je.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:B.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);const i=this.defineRule(e,n,r);return this[e]=i,i}OVERRIDE_RULE(e,n,r=cn){const i=Cd(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);const s=this.defineRule(e,n,r);return this[e]=s,s}BACKTRACK(e,n){return function(){this.isBackTrackingStack.push(1);const r=this.saveRecogState();try{return e.apply(this,n),!0}catch(i){if(xt(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return of(w(this.gastProductionsCache))}}class ap{initRecognizerEngine(e,n){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=sn,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},S(n,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(_(e)){if(x(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(_(e))this.tokensMap=q(e,(s,a)=>(s[a.name]=a,s),{});else if(S(e,"modes")&&ce(oe(w(e.modes)),td)){const s=oe(w(e.modes)),a=Or(s);this.tokensMap=q(a,(o,c)=>(o[c.name]=c,o),{})}else if(ne(e))this.tokensMap=U(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Ye;const r=S(e,"modes")?oe(w(e.modes)):w(e),i=ce(r,s=>x(s.categoryMatches));this.tokenMatcher=i?sn:wt,Mt(w(this.tokensMap))}defineRule(e,n,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const i=S(r,"resyncEnabled")?r.resyncEnabled:cn.resyncEnabled,s=S(r,"recoveryValueFunc")?r.recoveryValueFunc:cn.recoveryValueFunc,a=this.ruleShortNameIdx<<jd+Ge;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let o;return this.outputCst===!0?o=function(...u){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),n.apply(this,u);const h=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(h),h}catch(h){return this.invokeRuleCatch(h,i,s)}finally{this.ruleFinallyStateUpdate()}}:o=function(...u){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),n.apply(this,u)}catch(h){return this.invokeRuleCatch(h,i,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:e,originalGrammarAction:n})}invokeRuleCatch(e,n,r){const i=this.RULE_STACK.length===1,s=n&&!this.isBackTracking()&&this.recoveryEnabled;if(xt(e)){const a=e;if(s){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return r(e);else{if(this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,a.partialCstResult=c}throw a}}else{if(i)return this.moveToTerminatedState(),r(e);throw a}}else throw e}optionInternal(e,n){const r=this.getKeyForAutomaticLookahead(qs,n);return this.optionInternalLogic(e,n,r)}optionInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof e!="function"){s=e.DEF;const a=e.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else s=e;if(i.call(this)===!0)return s.call(this)}atLeastOneInternal(e,n){const r=this.getKeyForAutomaticLookahead(Jn,e);return this.atLeastOneInternalLogic(e,n,r)}atLeastOneInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof n!="function"){s=n.DEF;const a=n.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else s=n;if(i.call(this)===!0){let a=this.doSingleRepetition(s);for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,k.REPETITION_MANDATORY,n.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,n],i,Jn,e,fd)}atLeastOneSepFirstInternal(e,n){const r=this.getKeyForAutomaticLookahead(qt,e);this.atLeastOneSepFirstInternalLogic(e,n,r)}atLeastOneSepFirstInternalLogic(e,n,r){const i=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,wi],o,qt,e,wi)}else throw this.raiseEarlyExitException(e,k.REPETITION_MANDATORY_WITH_SEPARATOR,n.ERR_MSG)}manyInternal(e,n){const r=this.getKeyForAutomaticLookahead(Qn,e);return this.manyInternalLogic(e,n,r)}manyInternalLogic(e,n,r){let i=this.getLaFuncFromCache(r),s;if(typeof n!="function"){s=n.DEF;const o=n.GATE;if(o!==void 0){const c=i;i=()=>o.call(this)&&c.call(this)}}else s=n;let a=!0;for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,n],i,Qn,e,hd,a)}manySepFirstInternal(e,n){const r=this.getKeyForAutomaticLookahead(er,e);this.manySepFirstInternalLogic(e,n,r)}manySepFirstInternalLogic(e,n,r){const i=n.DEF,s=n.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,bi],o,er,e,bi)}}repetitionSepSecondInternal(e,n,r,i,s){for(;r();)this.CONSUME(n),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,n,r,i,s],r,qt,e,s)}doSingleRepetition(e){const n=this.getLexerPosition();return e.call(this),this.getLexerPosition()>n}orInternal(e,n){const r=this.getKeyForAutomaticLookahead(Xs,n),i=_(e)?e:e.DEF,a=this.getLaFuncFromCache(r).call(this,i);if(a!==void 0)return i[a].ALT.call(this);this.raiseNoAltException(n,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),n=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Dd(n,e))}}subruleInternal(e,n,r){let i;try{const s=r!==void 0?r.ARGS:void 0;return this.subruleIdx=n,i=e.apply(this,s),this.cstPostNonTerminal(i,r!==void 0&&r.LABEL!==void 0?r.LABEL:e.ruleName),i}catch(s){throw this.subruleInternalError(s,r,e.ruleName)}}subruleInternalError(e,n,r){throw xt(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,n!==void 0&&n.LABEL!==void 0?n.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,n,r){let i;try{const s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),i=s):this.consumeInternalError(e,s,r)}catch(s){i=this.consumeInternalRecovery(e,n,s)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:e.name,i),i}consumeInternalError(e,n,r){let i;const s=this.LA(0);throw r!==void 0&&r.ERR_MSG?i=r.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:n,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new Vs(i,n,s))}consumeInternalRecovery(e,n,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){const i=this.getFollowsForInRuleRecovery(e,n);try{return this.tryInRuleRecovery(e,i)}catch(s){throw s.name===Ys?r:s}}else throw r}saveRecogState(){const e=this.errors,n=U(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:n,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,n,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(n)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Ye)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class op{initErrorHandler(e){this._errors=[],this.errorMessageProvider=S(e,"errorMessageProvider")?e.errorMessageProvider:Le.errorMessageProvider}SAVE_ERROR(e){if(xt(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:U(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return U(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,n,r){const i=this.getCurrRuleFullName(),s=this.getGAstProductions()[i],o=xr(e,s,n,this.maxLookahead)[0],c=[];for(let u=1;u<=this.maxLookahead;u++)c.push(this.LA(u));const l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:c,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new Bd(l,this.LA(1),this.LA(0)))}raiseNoAltException(e,n){const r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],s=Cr(e,i,this.maxLookahead),a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));const o=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:o,customUserDescription:n,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new $d(c,this.LA(1),o))}}class cp{initContentAssist(){}computeContentAssist(e,n){const r=this.gastProductionsCache[e];if(xe(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Ms([r],n,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const n=ue(e.ruleStack),i=this.getGAstProductions()[n];return new ud(i,e).startWalking()}}const Cn={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Cn);const $i=!0,Di=Math.pow(2,Ge)-1,Qs=pe({name:"RECORDING_PHASE_TOKEN",pattern:D.NA});Mt([Qs]);const Js=yr(Qs,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Js);const lp={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class up{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const n=e>0?e:"";this[`CONSUME${n}`]=function(r,i){return this.consumeInternalRecord(r,e,i)},this[`SUBRULE${n}`]=function(r,i){return this.subruleInternalRecord(r,e,i)},this[`OPTION${n}`]=function(r){return this.optionInternalRecord(r,e)},this[`OR${n}`]=function(r){return this.orInternalRecord(r,e)},this[`MANY${n}`]=function(r){this.manyInternalRecord(e,r)},this[`MANY_SEP${n}`]=function(r){this.manySepFirstInternalRecord(e,r)},this[`AT_LEAST_ONE${n}`]=function(r){this.atLeastOneInternalRecord(e,r)},this[`AT_LEAST_ONE_SEP${n}`]=function(r){this.atLeastOneSepFirstInternalRecord(e,r)}}this.consume=function(e,n,r){return this.consumeInternalRecord(n,e,r)},this.subrule=function(e,n,r){return this.subruleInternalRecord(n,e,r)},this.option=function(e,n){return this.optionInternalRecord(n,e)},this.or=function(e,n){return this.orInternalRecord(n,e)},this.many=function(e,n){this.manyInternalRecord(e,n)},this.atLeastOne=function(e,n){this.atLeastOneInternalRecord(e,n)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let n=0;n<10;n++){const r=n>0?n:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,n){return()=>!0}LA_RECORD(e){return on}topLevelRuleRecord(e,n){try{const r=new ot({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),n.call(this),this.recordingProdStack.pop(),r}catch(r){if(r.KNOWN_RECORDER_ERROR!==!0)try{r.message=r.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw r}throw r}}optionInternalRecord(e,n){return mt.call(this,K,e,n)}atLeastOneInternalRecord(e,n){mt.call(this,Re,n,e)}atLeastOneSepFirstInternalRecord(e,n){mt.call(this,Se,n,e,$i)}manyInternalRecord(e,n){mt.call(this,M,n,e)}manySepFirstInternalRecord(e,n){mt.call(this,fe,n,e,$i)}orInternalRecord(e,n){return hp.call(this,e,n)}subruleInternalRecord(e,n,r){if(an(n),!e||S(e,"ruleName")===!1){const o=new Error(`<SUBRULE${Bi(n)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const i=st(this.recordingProdStack),s=e.ruleName,a=new Z({idx:n,nonTerminalName:s,label:r==null?void 0:r.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?lp:Cn}consumeInternalRecord(e,n,r){if(an(n),!Ps(e)){const a=new Error(`<CONSUME${Bi(n)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const i=st(this.recordingProdStack),s=new v({idx:n,terminalType:e,label:r==null?void 0:r.LABEL});return i.definition.push(s),Js}}function mt(t,e,n,r=!1){an(n);const i=st(this.recordingProdStack),s=ve(e)?e:e.DEF,a=new t({definition:[],idx:n});return r&&(a.separator=e.SEP),S(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),i.definition.push(a),this.recordingProdStack.pop(),Cn}function hp(t,e){an(e);const n=st(this.recordingProdStack),r=_(t)===!1,i=r===!1?t:t.DEF,s=new de({definition:[],idx:e,ignoreAmbiguities:r&&t.IGNORE_AMBIGUITIES===!0});S(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD);const a=Is(i,o=>ve(o.GATE));return s.hasPredicates=a,n.definition.push(s),O(i,o=>{const c=new j({definition:[]});s.definition.push(c),S(o,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:S(o,"GATE")&&(c.ignoreAmbiguities=!0),this.recordingProdStack.push(c),o.ALT.call(this),this.recordingProdStack.pop()}),Cn}function Bi(t){return t===0?"":`${t}`}function an(t){if(t<0||t>Di){const e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${Di+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class fp{initPerformanceTracer(e){if(S(e,"traceInitPerf")){const n=e.traceInitPerf,r=typeof n=="number";this.traceInitMaxIdent=r?n:1/0,this.traceInitPerf=r?n>0:n}else this.traceInitMaxIdent=0,this.traceInitPerf=Le.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,n){if(this.traceInitPerf===!0){this.traceInitIndent++;const r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--> <${e}>`);const{time:i,value:s}=Ss(n),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,s}else return n()}}function dp(t,e){e.forEach(n=>{const r=n.prototype;Object.getOwnPropertyNames(r).forEach(i=>{if(i==="constructor")return;const s=Object.getOwnPropertyDescriptor(r,i);s&&(s.get||s.set)?Object.defineProperty(t.prototype,i,s):t.prototype[i]=n.prototype[i]})})}const on=yr(Ye,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(on);const Le=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:ws,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),cn=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var B;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(B||(B={}));class Ft{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const n=this.className;this.TRACE_INIT("toFastProps",()=>{Os(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),O(this.definedRulesNames,i=>{const a=this[i].originalGrammarAction;let o;this.TRACE_INIT(`${i} Rule`,()=>{o=this.topLevelRuleRecord(i,a)}),this.gastProductionsCache[i]=o})}finally{this.disableRecording()}});let r=[];if(this.TRACE_INIT("Grammar Resolving",()=>{r=Fd({rules:w(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(r)}),this.TRACE_INIT("Grammar Validations",()=>{if(x(r)&&this.skipValidations===!1){const i=Ud({rules:w(this.gastProductionsCache),tokenTypes:w(this.tokensMap),errMsgProvider:je,grammarName:n}),s=Rd({lookaheadStrategy:this.lookaheadStrategy,rules:w(this.gastProductionsCache),tokenTypes:w(this.tokensMap),grammarName:n});this.definitionErrors=this.definitionErrors.concat(i,s)}}),x(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const i=pf(w(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,s;(s=(i=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(i,{rules:w(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(w(this.gastProductionsCache))})),!Ft.DEFER_DEFINITION_ERRORS_HANDLING&&!x(this.definitionErrors))throw e=A(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,n){this.definitionErrors=[],this.selfAnalysisDone=!1;const r=this;if(r.initErrorHandler(n),r.initLexerAdapter(),r.initLooksAhead(n),r.initRecognizerEngine(e,n),r.initRecoverable(n),r.initTreeBuilder(n),r.initContentAssist(),r.initGastRecorder(n),r.initPerformanceTracer(n),S(n,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=S(n,"skipValidations")?n.skipValidations:Le.skipValidations}}Ft.DEFER_DEFINITION_ERRORS_HANDLING=!1;dp(Ft,[Kd,zd,rp,ip,ap,sp,op,cp,up,fp]);class pp extends Ft{constructor(e,n=Le){const r=U(n);r.outputCst=!0,super(e,r)}}const _e=pe({name:"WhiteSpace",pattern:/[ \t]+/,group:D.SKIPPED}),Rt=pe({name:"NewLine",pattern:/\r?\n/}),mp=pe({name:"Comment",pattern:/#.*/,group:D.SKIPPED}),vr=pe({name:"AtTrack",pattern:/@track/}),nt=pe({name:"Equal",pattern:/=/}),ea=pe({name:"BarLine",pattern:/\|+/}),St=pe({name:"NumberTok",pattern:/[0-9]+(?:\.[0-9]+)?/}),ye=pe({name:"Identifier",pattern:/[A-Za-z_][A-Za-z0-9_-]*/}),kr=pe({name:"NoteTok",pattern:/(?:R|[A-G](?:#|b)?[0-9]?)/}),ta=[_e,mp,Rt,vr,nt,ea,St,kr,ye],gp=new D(ta);class Tp extends pp{constructor(){super(ta,{recoveryEnabled:!0});const e=this;e.RULE("program",()=>{e.MANY(()=>e.SUBRULE(e.directive)),e.AT_LEAST_ONE(()=>e.SUBRULE(e.trackBlock))}),e.RULE("directive",()=>{e.CONSUME(ye),e.CONSUME1(_e,{OPT:!0}),e.CONSUME(nt),e.CONSUME2(_e,{OPT:!0}),e.CONSUME(St),e.CONSUME(Rt)}),e.RULE("trackBlock",()=>{e.OPTION(()=>{e.CONSUME(vr),e.CONSUME(_e),e.CONSUME(ye),e.MANY(()=>e.SUBRULE(e.trackOption)),e.CONSUME(Rt)}),e.AT_LEAST_ONE(()=>e.SUBRULE(e.noteLine))}),e.RULE("trackOption",()=>{e.CONSUME(_e),e.CONSUME(ye),e.CONSUME(nt),e.CONSUME(St)}),e.RULE("noteLine",()=>{e.AT_LEAST_ONE_SEP({SEP:_e,DEF:()=>e.SUBRULE(e.noteOrRest)}),e.OPTION(()=>e.CONSUME(ea)),e.CONSUME(Rt)}),e.RULE("noteOrRest",()=>{e.CONSUME(kr),e.CONSUME(_e),e.CONSUME(St)}),this.performSelfAnalysis()}}class Ep{constructor(){Ue(this,"cstParser",new Tp)}parse(e){const n=gp.tokenize(e);if(n.errors.length)throw n.errors[0];if(this.cstParser.input=n.tokens,this.cstParser.errors.length)throw this.cstParser.errors[0];return this.cstToAst(n.tokens)}cstToAst(e){var l;const n={},r=[];let i={name:"main",delay:0,waveform:null,volume:null,tempo:null,tokens:[]},s=!1,a=null;const o=()=>{i.tokens.length&&r.push(i)},c=u=>parseFloat(u.image);for(let u=0;u<e.length;u++){const h=e[u];switch(h.tokenType){case ye:if(((l=e[u+1])==null?void 0:l.tokenType)===nt)continue;break;case nt:const f=e[u-1],d=e[u+1];if(!f||!d)continue;if(!i.tokens.length&&f.tokenType===ye){const R=c(d),T=f.image.toLowerCase(),m=isNaN(R)?String(d.image):R;n[T]=m}else if(i&&f.tokenType===ye){const R=f.image.toLowerCase();R==="delay"&&(i.delay=c(d)),R==="waveform"&&(i.waveform=String(d.image)),R==="volume"&&(i.volume=c(d)),R==="tempo"&&(i.tempo=c(d))}break;case vr:for(o(),u+=1;u<e.length&&e[u].tokenType===_e;)u++;if(u<e.length&&e[u].tokenType===ye)for(i={name:e[u].image,delay:0,waveform:null,volume:null,tempo:null,tokens:[]},u++;u<e.length&&e[u].tokenType!==Rt;){if(e[u].tokenType===_e){u++;continue}if(u+2<e.length&&e[u].tokenType===ye&&e[u+1].tokenType===nt){const T=e[u].image.toLowerCase(),m=e[u+2];if(m){switch(T){case"delay":const p=c(m);i.delay=p;break;case"waveform":i.waveform=String(m.image);break;case"volume":const E=c(m);i.volume=E;break;case"tempo":const y=c(m);i.tempo=y;break}u+=3}else u+=2}else u++}else i={name:`unnamed_${r.length}`,delay:0,waveform:null,volume:null,tempo:null,tokens:[]};break;case kr:const g=h.image.match(/^(R|[A-G])(#|b)?([0-9])?$/),I=g[1]==="R";a={type:"note",note:g[1],accidental:g[2]||null,octave:g[3]?parseInt(g[3]):null,duration:0,isRest:I},s=!0;break;case St:s&&a&&(a.duration=parseFloat(h.image),i.tokens.push(a),s=!1,a=null);break}}return o(),{globals:n,tracks:r}}}/**
 * BuzzerPlayer.ts
 *
 * A simple buzzer player for the web, using the Web Audio API.
 * It can play buzzer scripts with multiple tracks, volume control, and
 * different waveforms.
 *
 * @license MIT
 * @author dragon-fish <dragon-fish@qq.com>
 * @author ChatGPT-o3 BzsParser
 * @author Claude-3.7 Debugging
 */const ln=class ln{constructor(e={}){Ue(this,"ctx",new(window.AudioContext||window.webkitAudioContext));Ue(this,"options");Ue(this,"scheduled",[]);Ue(this,"playing",!1);Ue(this,"bzs",new Ep);this.options={volume:e.volume??.2,waveform:e.waveform??"square",tempo:e.tempo??120}}async playScript(e){this.playing&&await this.stop();const n=this.parseScript(e);if(!n.length)return;const r=this.ctx.currentTime+.05;for(const s of n){const a=r+s.start;if(s.freq===null)continue;const o=this.ctx.createOscillator(),c=this.ctx.createGain();o.type=s.waveform,o.frequency.value=s.freq,c.gain.value=s.volume,o.connect(c),c.connect(this.ctx.destination),o.start(a),o.stop(a+s.dur),this.scheduled.push({osc:o,gain:c})}this.playing=!0;const i=n[n.length-1];return new Promise(s=>{setTimeout(()=>{this.playing=!1,s()},(i.start+i.dur)*1e3+100)})}async stop(){for(const{osc:e,gain:n}of this.scheduled)try{e.stop(),e.disconnect(),n.disconnect()}catch{}this.scheduled=[],this.playing=!1}async destroy(){await this.stop(),await this.ctx.close()}parseScript(e){const n=this.bzs.parse(e),r=n.globals.tempo??this.options.tempo,i=n.globals.waveform??this.options.waveform,s=n.globals.volume??this.options.volume,a=[];for(const o of n.tracks){const c=o.waveform??i,l=o.volume??s,h=60/(o.tempo??r),f=o.delay*h;let d=0;for(const g of o.tokens){const I=4/g.duration*h;if(g.note==="R")a.push({freq:null,start:f+d,dur:I,waveform:c,volume:l});else{const R=g.accidental?`${g.note}${g.accidental}`:g.note,T=g.octave??4,m=ln.noteToFreq(R,T);a.push({freq:m,start:f+d,dur:I,waveform:c,volume:l})}d+=I}}return a.sort((o,c)=>o.start-c.start),console.info("parseScript(result)",{ast:n,tempo:r,waveform:i,volume:s,events:a}),a}static noteToFreq(e,n){e=e.replace(/[A-G]B/g,i=>i[0]+"b");const r=this.SEMITONE_MAP[e];return 440*Math.pow(2,(r+12*(n-4))/12)}};Ue(ln,"SEMITONE_MAP",{C:-9,"C#":-8,Db:-8,D:-7,"D#":-6,Eb:-6,E:-5,F:-4,"F#":-3,Gb:-3,G:-2,"G#":-1,Ab:-1,A:0,"A#":1,Bb:1,B:2});let nr=ln;const na=document.getElementById("root"),Ap=new URL("./",window.location.href),Dn=[{label:"Twinkle, Twinkle, Little Star",url:"./demos/Twinkle, Twinkle, Little Star.bzs"},{label:"Happy Birthday",url:"./demos/Happy Birthday.bzs"},{label:"Beethoven – Symphony No. 5 in C minor, Op. 67",url:"./demos/Beethoven – Symphony No. 5 in C minor, Op. 67.bzs"},{label:"Hirokazu Tanaka - Tetris Theme A",url:"./demos/Hirokazu Tanaka - Tetris Theme A.bzs"},{label:"Pachelbel – Canon in D",url:"./demos/Pachelbel – Canon in D.bzs"},{label:"debug song: writen by AI",url:"./demos/debug.bzs"}],Zt=new nr({tempo:120,waveform:"sine",volume:.5});window.buzzer=Zt;const Ip=({list:t,onChange:e,...n})=>z("select",{onChange:r=>{const i=t.find(s=>s.label===r.target.value);i&&e(i.url)},...n,children:t.map(r=>z("option",{value:r.label,children:r.label},r.label))}),Rp=()=>{const t=z("textarea",{id:"bzs"}),e=z(Ip,{style:{width:"100%"},list:Dn,onChange:r=>{n(r)}}),n=async r=>{const i=await fetch(new URL(r,Ap).href);if(!i.ok){console.error("Failed to load script:",i.statusText);return}const s=await i.text();t.value=s,Zt.stop()};return e.value=Dn[0].label,n(Dn[0].url),z("main",{children:[z("h1",{children:"Buzzer Player"}),z("p",{children:"Lightweight WebAudio library for browser‑side “buzzer” melodies."}),z("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[z("label",{htmlFor:"bzs",children:"Buzzer Script (.BZS)"}),e,t]}),z("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginTop:"10px"},children:[z("button",{onClick:()=>{Zt.playScript(t.value).catch(r=>{console.error("Error playing script:",r),xt(r)?alert(`ParserError: ${r.message}
Line: ${r.line}
Column: ${r.column}`):alert(`Error: ${r.message}`)})},children:"Play"}),z("button",{onClick:()=>{Zt.stop()},children:"Stop"})]})]})};na.innerHTML="";na.appendChild(z(Rp,{}))});export default Sp();
